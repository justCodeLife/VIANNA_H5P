var oldTether=window.Tether;!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){var e=getComputedStyle(t),o=e.position;if("fixed"===o)return t;for(var i=t;i=i.parentNode;){var n=void 0;try{n=getComputedStyle(i)}catch(r){}if("undefined"==typeof n||null===n)return i;var s=n.overflow,a=n.overflowX,f=n.overflowY;if(/(auto|scroll)/.test(s+f+a)&&("absolute"!==o||["relative","absolute","fixed"].indexOf(n.position)>=0))return i}return document.body}function r(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var o=e.documentElement,i={},n=t.getBoundingClientRect();for(var r in n)i[r]=n[r];var s=x(e);return i.top-=s.top,i.left-=s.left,"undefined"==typeof i.width&&(i.width=document.body.scrollWidth-i.left-i.right),"undefined"==typeof i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-o.clientTop,i.left=i.left-o.clientLeft,i.right=e.body.clientWidth-i.width-i.left,i.bottom=e.body.clientHeight-i.height-i.top,i}function s(t){return t.offsetParent||document.documentElement}function a(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");f(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var o=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;o===i&&(i=e.clientWidth),document.body.removeChild(e);var n=o-i;return{width:n,height:n}}function f(){var t=void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var o in e)({}).hasOwnProperty.call(e,o)&&(t[o]=e[o])}),t}function h(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var o=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),i=u(t).replace(o," ");p(t,i)}}function l(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{h(t,e);var o=u(t)+(" "+e);p(t,o)}}function d(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var o=u(t);return new RegExp("(^| )"+e+"( |$)","gi").test(o)}function u(t){return t.className instanceof SVGAnimatedString?t.className.baseVal:t.className}function p(t,e){t.setAttribute("class",e)}function c(t,e,o){o.forEach(function(o){-1===e.indexOf(o)&&d(t,o)&&h(t,o)}),e.forEach(function(e){d(t,e)||l(t,e)})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){var o=void 0===arguments[2]?1:arguments[2];return t+o>=e&&e>=t-o}function m(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function v(){for(var t={top:0,left:0},e=arguments.length,o=Array(e),i=0;e>i;i++)o[i]=arguments[i];return o.forEach(function(e){var o=e.top,i=e.left;"string"==typeof o&&(o=parseFloat(o,10)),"string"==typeof i&&(i=parseFloat(i,10)),t.top+=o,t.left+=i}),t}function y(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}function b(t,e){return"scrollParent"===e?e=t.scrollParent:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),"undefined"!=typeof e.nodeType&&!function(){var t=r(e),o=t,i=getComputedStyle(e);e=[o.left,o.top,t.width+o.left,t.height+o.top],U.forEach(function(t,o){t=t[0].toUpperCase()+t.substr(1),"Top"===t||"Left"===t?e[o]+=parseFloat(i["border"+t+"Width"]):e[o]-=parseFloat(i["border"+t+"Width"])})}(),e}var w=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),C=void 0;"undefined"==typeof C&&(C={modules:[]});var O=function(){var t=0;return function(){return++t}}(),E={},x=function(t){var e=t._tetherZeroElement;"undefined"==typeof e&&(e=t.createElement("div"),e.setAttribute("data-tether-id",O()),f(e.style,{top:0,left:0,position:"absolute"}),t.body.appendChild(e),t._tetherZeroElement=e);var o=e.getAttribute("data-tether-id");if("undefined"==typeof E[o]){E[o]={};var i=e.getBoundingClientRect();for(var n in i)E[o][n]=i[n];T(function(){delete E[o]})}return E[o]},A=[],T=function(t){A.push(t)},S=function(){for(var t=void 0;t=A.pop();)t()},W=function(){function t(){i(this,t)}return w(t,[{key:"on",value:function(t,e,o){var i=void 0===arguments[3]?!1:arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:i})}},{key:"once",value:function(t,e,o){this.on(t,e,o,!0)}},{key:"off",value:function(t,e){if("undefined"==typeof this.bindings||"undefined"==typeof this.bindings[t])if("undefined"==typeof e)delete this.bindings[t];else for(var o=0;o<this.bindings[t].length;)this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):++o}},{key:"trigger",value:function(t){if("undefined"!=typeof this.bindings&&this.bindings[t])for(var e=0;e<this.bindings[t].length;){var o=this.bindings[t][e],i=o.handler,n=o.ctx,r=o.once,s=n;"undefined"==typeof s&&(s=this);for(var a=arguments.length,f=Array(a>1?a-1:0),h=1;a>h;h++)f[h-1]=arguments[h];i.apply(s,f),r?this.bindings[t].splice(e,1):++e}}}]),t}();C.Utils={getScrollParent:n,getBounds:r,getOffsetParent:s,extend:f,addClass:l,removeClass:h,hasClass:d,updateClasses:c,defer:T,flush:S,uniqueId:O,Evented:W,getScrollBarSize:a};var M=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();if("undefined"==typeof C)throw new Error("You must include the utils.js file before tether.js");var P=C.Utils,n=P.getScrollParent,r=P.getBounds,s=P.getOffsetParent,f=P.extend,l=P.addClass,h=P.removeClass,c=P.updateClasses,T=P.defer,S=P.flush,a=P.getScrollBarSize,k=function(){for(var t=document.createElement("div"),e=["transform","webkitTransform","OTransform","MozTransform","msTransform"],o=0;o<e.length;++o){var i=e[o];if(void 0!==t.style[i])return i}}(),B=[],_=function(){B.forEach(function(t){t.position(!1)}),S()};!function(){var t=null,e=null,o=null,i=function n(){return"undefined"!=typeof e&&e>16?(e=Math.min(e-16,250),void(o=setTimeout(n,250))):void("undefined"!=typeof t&&m()-t<10||("undefined"!=typeof o&&(clearTimeout(o),o=null),t=m(),_(),e=m()-t))};["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,i)})}();var z={center:"center",left:"right",right:"left"},F={middle:"middle",top:"bottom",bottom:"top"},L={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},Y=function(t,e){var o=t.left,i=t.top;return"auto"===o&&(o=z[e.left]),"auto"===i&&(i=F[e.top]),{left:o,top:i}},H=function(t){var e=t.left,o=t.top;return"undefined"!=typeof L[t.left]&&(e=L[t.left]),"undefined"!=typeof L[t.top]&&(o=L[t.top]),{left:e,top:o}},X=function(t){var e=t.split(" "),o=M(e,2),i=o[0],n=o[1];return{top:i,left:n}},j=X,N=function(){function t(e){var o=this;i(this,t),this.position=this.position.bind(this),B.push(this),this.history=[],this.setOptions(e,!1),C.modules.forEach(function(t){"undefined"!=typeof t.initialize&&t.initialize.call(o)}),this.position()}return w(t,[{key:"getClass",value:function(){var t=void 0===arguments[0]?"":arguments[0],e=this.options.classes;return"undefined"!=typeof e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,o=void 0===arguments[1]?!0:arguments[1],i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=f(i,t);var r=this.options,s=r.element,a=r.target,h=r.targetModifier;if(this.element=s,this.target=a,this.targetModifier=h,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if("undefined"==typeof e[t])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),l(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&l(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=j(this.options.targetAttachment),this.attachment=j(this.options.attachment),this.offset=X(this.options.offset),this.targetOffset=X(this.options.targetOffset),"undefined"!=typeof this.scrollParent&&this.disable(),this.scrollParent="scroll-handle"===this.targetModifier?this.target:n(this.target),this.options.enabled!==!1&&this.enable(o)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return r(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=r(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left};return e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e}if("scroll-handle"===this.targetModifier){var t=void 0,o=this.target;o===document.body?(o=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=r(o);var i=getComputedStyle(o),n=o.scrollWidth>o.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body,s=0;n&&(s=15);var a=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-s,e={width:15,height:.975*a*(a/o.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},f=0;408>a&&this.target===document.body&&(f=-11e-5*Math.pow(a,2)-.00727*a+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24));var h=this.target.scrollTop/(o.scrollHeight-a);return e.top=h*(a-e.height-f)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=void 0===arguments[0]?!0:arguments[0];this.options.addTargetClasses!==!1&&l(this.target,this.getClass("enabled")),l(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),t&&this.position()}},{key:"disable",value:function(){h(this.target,this.getClass("enabled")),h(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParent&&this.scrollParent.removeEventListener("scroll",this.position)}},{key:"destroy",value:function(){var t=this;this.disable(),B.forEach(function(e,o){return e===t?void B.splice(o,1):void 0})}},{key:"updateAttachClasses",value:function(t,e){var o=this;t=t||this.attachment,e=e||this.targetAttachment;var i=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left);var r=[];i.forEach(function(t){r.push(o.getClass("element-attached")+"-"+t),r.push(o.getClass("target-attached")+"-"+t)}),T(function(){"undefined"!=typeof o._addAttachClasses&&(c(o.element,o._addAttachClasses,r),o.options.addTargetClasses!==!1&&c(o.target,o._addAttachClasses,r),delete o._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=void 0===arguments[0]?!0:arguments[0];if(this.enabled){this.clearCache();var o=Y(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,o);var i=this.cache("element-bounds",function(){return r(t.element)}),n=i.width,f=i.height;if(0===n&&0===f&&"undefined"!=typeof this.lastSize){var h=this.lastSize;n=h.width,f=h.height}else this.lastSize={width:n,height:f};var l=this.cache("target-bounds",function(){return t.getTargetBounds()}),d=l,u=y(H(this.attachment),{width:n,height:f}),p=y(H(o),d),c=y(this.offset,{width:n,height:f}),g=y(this.targetOffset,d);u=v(u,c),p=v(p,g);for(var m=l.left+p.left-u.left,b=l.top+p.top-u.top,w=0;w<C.modules.length;++w){var O=C.modules[w],E=O.position.call(this,{left:m,top:b,targetAttachment:o,targetPos:l,elementPos:i,offset:u,targetOffset:p,manualOffset:c,manualTargetOffset:g,scrollbarSize:A,attachment:this.attachment});if(E===!1)return!1;"undefined"!=typeof E&&"object"==typeof E&&(b=E.top,m=E.left)}var x={page:{top:b,left:m},viewport:{top:b-pageYOffset,bottom:pageYOffset-b-f+innerHeight,left:m-pageXOffset,right:pageXOffset-m-n+innerWidth}},A=void 0;return document.body.scrollWidth>window.innerWidth&&(A=this.cache("scrollbar-size",a),x.viewport.bottom-=A.height),document.body.scrollHeight>window.innerHeight&&(A=this.cache("scrollbar-size",a),x.viewport.right-=A.width),(-1===["","static"].indexOf(document.body.style.position)||-1===["","static"].indexOf(document.body.parentElement.style.position))&&(x.page.bottom=document.body.scrollHeight-b-f,x.page.right=document.body.scrollWidth-m-n),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var e=t.cache("target-offsetparent",function(){return s(t.target)}),o=t.cache("target-offsetparent-bounds",function(){return r(e)}),i=getComputedStyle(e),n=o,a={};if(["Top","Left","Bottom","Right"].forEach(function(t){a[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),o.right=document.body.scrollWidth-o.left-n.width+a.right,o.bottom=document.body.scrollHeight-o.top-n.height+a.bottom,x.page.top>=o.top+a.top&&x.page.bottom>=o.bottom&&x.page.left>=o.left+a.left&&x.page.right>=o.right){var f=e.scrollTop,h=e.scrollLeft;x.offset={top:x.page.top-o.top+f-a.top,left:x.page.left-o.left+h-a.left}}}(),this.move(x),this.history.unshift(x),this.history.length>3&&this.history.pop(),e&&S(),!0}}},{key:"move",value:function(t){var e=this;if("undefined"!=typeof this.element.parentNode){var o={};for(var i in t){o[i]={};for(var n in t[i]){for(var r=!1,a=0;a<this.history.length;++a){var h=this.history[a];if("undefined"!=typeof h[i]&&!g(h[i][n],t[i][n])){r=!0;break}}r||(o[i][n]=!0)}}var l={top:"",left:"",right:"",bottom:""},d=function(t,o){var i="undefined"!=typeof e.options.optimizations,n=i?e.options.optimizations.gpu:null;if(n!==!1){var r=void 0,s=void 0;t.top?(l.top=0,r=o.top):(l.bottom=0,r=-o.bottom),t.left?(l.left=0,s=o.left):(l.right=0,s=-o.right),l[k]="translateX("+Math.round(s)+"px) translateY("+Math.round(r)+"px)","msTransform"!==k&&(l[k]+=" translateZ(0)")}else t.top?l.top=o.top+"px":l.bottom=o.bottom+"px",t.left?l.left=o.left+"px":l.right=o.right+"px"},u=!1;(o.page.top||o.page.bottom)&&(o.page.left||o.page.right)?(l.position="absolute",d(o.page,t.page)):(o.viewport.top||o.viewport.bottom)&&(o.viewport.left||o.viewport.right)?(l.position="fixed",d(o.viewport,t.viewport)):"undefined"!=typeof o.offset&&o.offset.top&&o.offset.left?!function(){l.position="absolute";var i=e.cache("target-offsetparent",function(){return s(e.target)});s(e.element)!==i&&T(function(){e.element.parentNode.removeChild(e.element),i.appendChild(e.element)}),d(o.offset,t.offset),u=!0}():(l.position="absolute",d({top:!0,left:!0},t.page)),u||"BODY"===this.element.parentNode.tagName||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element));var p={},c=!1;for(var n in l){var m=l[n],v=this.element.style[n];""!==v&&""!==m&&["top","left","bottom","right"].indexOf(n)>=0&&(v=parseFloat(v),m=parseFloat(m)),v!==m&&(c=!0,p[n]=m)}c&&T(function(){f(e.element.style,p)})}}}]),t}();N.modules=[],C.position=_;var R=f(N,C),M=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=C.Utils,r=P.getBounds,f=P.extend,c=P.updateClasses,T=P.defer,U=["left","top","right","bottom"];C.modules.push({position:function(t){var e=this,o=t.top,i=t.left,n=t.targetAttachment;if(!this.options.constraints)return!0;var s=this.cache("element-bounds",function(){return r(e.element)}),a=s.height,h=s.width;if(0===h&&0===a&&"undefined"!=typeof this.lastSize){var l=this.lastSize;h=l.width,a=l.height}var d=this.cache("target-bounds",function(){return e.getTargetBounds()}),u=d.height,p=d.width,g=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,o=t.pinnedClass;e&&g.push(e),o&&g.push(o)}),g.forEach(function(t){["left","top","right","bottom"].forEach(function(e){g.push(t+"-"+e)})});var m=[],v=f({},n),y=f({},this.attachment);return this.options.constraints.forEach(function(t){var r=t.to,s=t.attachment,f=t.pin;"undefined"==typeof s&&(s="");var l=void 0,d=void 0;if(s.indexOf(" ")>=0){var c=s.split(" "),g=M(c,2);d=g[0],l=g[1]}else l=d=s;var w=b(e,r);("target"===d||"both"===d)&&(o<w[1]&&"top"===v.top&&(o+=u,v.top="bottom"),o+a>w[3]&&"bottom"===v.top&&(o-=u,v.top="top")),"together"===d&&(o<w[1]&&"top"===v.top&&("bottom"===y.top?(o+=u,v.top="bottom",o+=a,y.top="top"):"top"===y.top&&(o+=u,v.top="bottom",o-=a,y.top="bottom")),o+a>w[3]&&"bottom"===v.top&&("top"===y.top?(o-=u,v.top="top",o-=a,y.top="bottom"):"bottom"===y.top&&(o-=u,v.top="top",o+=a,y.top="top")),"middle"===v.top&&(o+a>w[3]&&"top"===y.top?(o-=a,y.top="bottom"):o<w[1]&&"bottom"===y.top&&(o+=a,y.top="top"))),("target"===l||"both"===l)&&(i<w[0]&&"left"===v.left&&(i+=p,v.left="right"),i+h>w[2]&&"right"===v.left&&(i-=p,v.left="left")),"together"===l&&(i<w[0]&&"left"===v.left?"right"===y.left?(i+=p,v.left="right",i+=h,y.left="left"):"left"===y.left&&(i+=p,v.left="right",i-=h,y.left="right"):i+h>w[2]&&"right"===v.left?"left"===y.left?(i-=p,v.left="left",i-=h,y.left="right"):"right"===y.left&&(i-=p,v.left="left",i+=h,y.left="left"):"center"===v.left&&(i+h>w[2]&&"left"===y.left?(i-=h,y.left="right"):i<w[0]&&"right"===y.left&&(i+=h,y.left="left"))),("element"===d||"both"===d)&&(o<w[1]&&"bottom"===y.top&&(o+=a,y.top="top"),o+a>w[3]&&"top"===y.top&&(o-=a,y.top="bottom")),("element"===l||"both"===l)&&(i<w[0]&&"right"===y.left&&(i+=h,y.left="left"),i+h>w[2]&&"left"===y.left&&(i-=h,y.left="right")),"string"==typeof f?f=f.split(",").map(function(t){return t.trim()}):f===!0&&(f=["top","left","right","bottom"]),f=f||[];var C=[],O=[];o<w[1]&&(f.indexOf("top")>=0?(o=w[1],C.push("top")):O.push("top")),o+a>w[3]&&(f.indexOf("bottom")>=0?(o=w[3]-a,C.push("bottom")):O.push("bottom")),i<w[0]&&(f.indexOf("left")>=0?(i=w[0],C.push("left")):O.push("left")),i+h>w[2]&&(f.indexOf("right")>=0?(i=w[2]-h,C.push("right")):O.push("right")),C.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),m.push(t),C.forEach(function(e){m.push(t+"-"+e)})}(),O.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),m.push(t),O.forEach(function(e){m.push(t+"-"+e)})}(),(C.indexOf("left")>=0||C.indexOf("right")>=0)&&(y.left=v.left=!1),(C.indexOf("top")>=0||C.indexOf("bottom")>=0)&&(y.top=v.top=!1),(v.top!==n.top||v.left!==n.left||y.top!==e.attachment.top||y.left!==e.attachment.left)&&e.updateAttachClasses(y,v)}),T(function(){e.options.addTargetClasses!==!1&&c(e.target,m,g),c(e.element,m,g)}),{top:o,left:i}}});var P=C.Utils,r=P.getBounds,c=P.updateClasses,T=P.defer;C.modules.push({position:function(t){var e=this,o=t.top,i=t.left,n=this.cache("element-bounds",function(){return r(e.element)}),s=n.height,a=n.width,f=this.getTargetBounds(),h=o+s,l=i+a,d=[];o<=f.bottom&&h>=f.top&&["left","right"].forEach(function(t){var e=f[t];(e===i||e===l)&&d.push(t)}),i<=f.right&&l>=f.left&&["top","bottom"].forEach(function(t){var e=f[t];(e===o||e===h)&&d.push(t)});var u=[],p=[],g=["left","top","right","bottom"];return u.push(this.getClass("abutted")),g.forEach(function(t){u.push(e.getClass("abutted")+"-"+t)}),d.length&&p.push(this.getClass("abutted")),d.forEach(function(t){p.push(e.getClass("abutted")+"-"+t)}),T(function(){e.options.addTargetClasses!==!1&&c(e.target,p,u),c(e.element,p,u)}),!0}});var M=function(){function t(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(f){n=!0,r=f}finally{try{!i&&a["return"]&&a["return"]()}finally{if(n)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return C.modules.push({position:function(t){var e=t.top,o=t.left;if(this.options.shift){var i=this.options.shift;"function"==typeof this.options.shift&&(i=this.options.shift.call(this,{top:e,left:o}));var n=void 0,r=void 0;if("string"==typeof i){i=i.split(" "),i[1]=i[1]||i[0];var s=M(i,2);n=s[0],r=s[1],n=parseFloat(n,10),r=parseFloat(r,10)}else n=i.top,r=i.left;return e+=n,o+=r,{top:e,left:o}}}}),R});H5P.Tether=Tether;window.Tether=oldTether;;var oldDrop=window.Drop;var oldTether=window.Tether;Tether=H5P.Tether;!function(t,e){"function"==typeof define&&define.amd?define(["tether"],e):"object"==typeof exports?module.exports=e(require("tether")):t.Drop=e(t.Tether)}(this,function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){var e=t.split(" "),n=a(e,2),o=n[0],i=n[1];if(["left","right"].indexOf(o)>=0){var s=[i,o];o=s[0],i=s[1]}return[o,i].join(" ")}function i(t,e){for(var n=void 0,o=[];-1!==(n=t.indexOf(e));)o.push(t.splice(n,1));return o}function s(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],u=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return new(r.apply(b,[null].concat(e)))};p(u,{createContext:s,drops:[],defaults:{}});var g={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,tetherOptions:{}}};p(u,g,a),p(u.defaults,g.defaults,a.defaults),"undefined"==typeof x[u.classPrefix]&&(x[u.classPrefix]=[]),u.updateBodyClasses=function(){for(var t=!1,e=x[u.classPrefix],n=e.length,o=0;n>o;++o)if(e[o].isOpened()){t=!0;break}t?d(document.body,u.classPrefix+"-open"):c(document.body,u.classPrefix+"-open")};var b=function(s){function r(t){if(e(this,r),l(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.options=p({},u.defaults,t),this.target=this.options.target,"undefined"==typeof this.target)throw new Error("Drop Error: You must provide a target.");var n="data-"+u.classPrefix,o=this.target.getAttribute(n);o&&(this.options.content=o);for(var i=["position","openOn"],s=0;s<i.length;++s){var a=this.target.getAttribute(n+"-"+i[s]);a&&(this.options[i[s]]=a)}this.options.classes&&this.options.addTargetClasses!==!1&&d(this.target,this.options.classes),u.drops.push(this),x[u.classPrefix].push(this),this._boundEvents=[],this.bindMethods(),this.setupElements(),this.setupEvents(),this.setupTether()}return n(r,s),h(r,[{key:"_on",value:function(t,e,n){this._boundEvents.push({element:t,event:e,handler:n}),t.addEventListener(e,n)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var t=this;if(this.drop=document.createElement("div"),d(this.drop,u.classPrefix),this.options.classes&&d(this.drop,this.options.classes),this.content=document.createElement("div"),d(this.content,u.classPrefix+"-content"),"function"==typeof this.options.content){var e=function(){var e=t.options.content.call(t,t);if("string"==typeof e)t.content.innerHTML=e;else{if("object"!=typeof e)throw new Error("Drop Error: Content function should return a string or HTMLElement.");t.content.innerHTML="",t.content.appendChild(e)}};e(),this.on("open",e.bind(this))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var e=this.options.position.split(" ");e[0]=E[e[0]],e=e.join(" ");var n=[];this.options.constrainToScrollParent?n.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):n.push({to:"scrollParent"}),this.options.constrainToWindow!==!1?n.push({to:"window",attachment:"together"}):n.push({to:"window"});var i={element:this.drop,target:this.target,attachment:o(e),targetAttachment:o(this.options.position),classPrefix:u.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:n,addTargetClasses:this.options.addTargetClasses};this.options.tetherOptions!==!1&&(this.tether=new t(p({},i,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var t=this;if(this.options.openOn){if("always"===this.options.openOn)return void setTimeout(this.open.bind(this));var e=this.options.openOn.split(" ");if(e.indexOf("click")>=0)for(var n=function(e){t.toggle(e),e.preventDefault()},o=function(e){t.isOpened()&&(e.target===t.drop||t.drop.contains(e.target)||e.target===t.target||t.target.contains(e.target)||t.close(e))},i=0;i<y.length;++i){var s=y[i];this._on(this.target,s,n),this._on(document,s,o)}var r=!1,a=null,h=function(e){r=!0,t.open(e)},l=function(e){r=!1,"undefined"!=typeof a&&clearTimeout(a),a=setTimeout(function(){r||t.close(e),a=null},50)};e.indexOf("hover")>=0&&(this._on(this.target,"mouseover",h),this._on(this.drop,"mouseover",h),this._on(this.target,"mouseout",l),this._on(this.drop,"mouseout",l)),e.indexOf("focus")>=0&&(this._on(this.target,"focus",h),this._on(this.drop,"focus",h),this._on(this.target,"blur",l),this._on(this.drop,"blur",l))}}},{key:"isOpened",value:function(){return this.drop?f(this.drop,u.classPrefix+"-open"):void 0}},{key:"toggle",value:function(t){this.isOpened()?this.close(t):this.open(t)}},{key:"open",value:function(t){var e=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),"undefined"!=typeof this.tether&&this.tether.enable(),d(this.drop,u.classPrefix+"-open"),d(this.drop,u.classPrefix+"-open-transitionend"),setTimeout(function(){e.drop&&d(e.drop,u.classPrefix+"-after-open")}),"undefined"!=typeof this.tether&&this.tether.position(),this.trigger("open"),u.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(t){t.target===t.currentTarget&&(f(this.drop,u.classPrefix+"-open")||c(this.drop,u.classPrefix+"-open-transitionend"),this.drop.removeEventListener(m,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(t){var e=!0;return this.isClosing||"function"!=typeof this.options.beforeClose||(this.isClosing=!0,e=this.options.beforeClose(t,this)!==!1),this.isClosing=!1,e}},{key:"close",value:function(t){this.isOpened()&&this.beforeCloseHandler(t)&&(c(this.drop,u.classPrefix+"-open"),c(this.drop,u.classPrefix+"-after-open"),this.drop.addEventListener(m,this.transitionEndHandler),this.trigger("close"),"undefined"!=typeof this.tether&&this.tether.disable(),u.updateBodyClasses(),this.options.remove&&this.remove(t))}},{key:"remove",value:function(t){this.close(t),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&"undefined"!=typeof this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove(),"undefined"!=typeof this.tether&&this.tether.destroy();for(var t=0;t<this._boundEvents.length;++t){var e=this._boundEvents[t],n=e.element,o=e.event,s=e.handler;n.removeEventListener(o,s)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,i(x[u.classPrefix],this),i(u.drops,this)}}]),r}(v);return u}var r=Function.prototype.bind,a=function(){function t(t,e){var n=[],o=!0,i=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(o=(r=a.next()).done)&&(n.push(r.value),!e||n.length!==e);o=!0);}catch(h){i=!0,s=h}finally{try{!o&&a["return"]&&a["return"]()}finally{if(i)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function(t,e,n){for(var o=!0;o;){var i=t,s=e,r=n;a=l=h=void 0,o=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,s);if(void 0!==a){if("value"in a)return a.value;var h=a.get;return void 0===h?void 0:h.call(r)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=s,n=r,o=!0}},u=t.Utils,p=u.extend,d=u.addClass,c=u.removeClass,f=u.hasClass,v=u.Evented,y=["click"];"ontouchstart"in document.documentElement&&y.push("touchstart");var g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},m="";for(var b in g)if({}.hasOwnProperty.call(g,b)){var O=document.createElement("p");"undefined"!=typeof O.style[b]&&(m=g[b])}var E={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},x={},P=s();return document.addEventListener("DOMContentLoaded",function(){P.updateBodyClasses()}),P});H5P.Drop=Drop;window.Drop=oldDrop;window.Tether=oldTether;;var H5P=H5P||{};H5P.Transition=(function($){Transition={};Transition.transitionEndEventNames={'WebkitTransition':'webkitTransitionEnd','transition':'transitionend','MozTransition':'transitionend','OTransition':'oTransitionEnd','msTransition':'MSTransitionEnd'};Transition.cache=[];Transition.getVendorPropertyName=function(prop){if(Transition.cache[prop]!==undefined){return Transition.cache[prop];}
var div=document.createElement('div');if(prop in div.style){Transition.cache[prop]=prop;}
else{var prefixes=['Moz','Webkit','O','ms'];var prop_=prop.charAt(0).toUpperCase()+prop.substr(1);if(prop in div.style){Transition.cache[prop]=prop;}
else{for(var i=0;i<prefixes.length;++i){var vendorProp=prefixes[i]+prop_;if(vendorProp in div.style){Transition.cache[prop]=vendorProp;break;}}}}
return Transition.cache[prop];};Transition.getTransitionEndEventName=function(){return Transition.transitionEndEventNames[Transition.getVendorPropertyName('transition')]||undefined;};Transition.onTransitionEnd=function($element,callback,timeout){timeout=timeout||1000;Transition.transitionEndEventName=Transition.transitionEndEventName||Transition.getTransitionEndEventName();var callbackCalled=false;var doCallback=function(){if(callbackCalled){return;}
$element.off(Transition.transitionEndEventName,callback);callbackCalled=true;clearTimeout(timer);callback();};var timer=setTimeout(function(){doCallback();},timeout);$element.on(Transition.transitionEndEventName,function(){doCallback();});};var runSequence=function(transitions,index){if(index>=transitions.length){return;}
var transition=transitions[index];H5P.Transition.onTransitionEnd(transition.$element,function(){if(transition.end){transition.end();}
if(transition.break!==true){runSequence(transitions,index+1);}},transition.timeout||undefined);};Transition.sequence=function(transitions){runSequence(transitions,0);};return Transition;})(H5P.jQuery);;var H5P=H5P||{};H5P.JoubelHelpTextDialog=(function($){var numInstances=0;function JoubelHelpTextDialog(header,message,closeButtonTitle){H5P.EventDispatcher.call(this);var self=this;numInstances++;var headerId='joubel-help-text-header-'+numInstances;var helpTextId='joubel-help-text-body-'+numInstances;var $helpTextDialogBox=$('<div>',{'class':'joubel-help-text-dialog-box','role':'dialog','aria-labelledby':headerId,'aria-describedby':helpTextId});$('<div>',{'class':'joubel-help-text-dialog-background'}).appendTo($helpTextDialogBox);var $helpTextDialogContainer=$('<div>',{'class':'joubel-help-text-dialog-container'}).appendTo($helpTextDialogBox);$('<div>',{'class':'joubel-help-text-header','id':headerId,'role':'header','html':header}).appendTo($helpTextDialogContainer);$('<div>',{'class':'joubel-help-text-body','id':helpTextId,'html':message,'role':'document','tabindex':0}).appendTo($helpTextDialogContainer);var handleClose=function(){$helpTextDialogBox.remove();self.trigger('closed');};var $closeButton=$('<div>',{'class':'joubel-help-text-remove','role':'button','title':closeButtonTitle,'tabindex':1,'click':handleClose,'keydown':function(event){if([32,13].indexOf(event.which)!==-1){event.preventDefault();handleClose();}}}).appendTo($helpTextDialogContainer);self.getElement=function(){return $helpTextDialogBox;};self.focus=function(){$closeButton.focus();};}
JoubelHelpTextDialog.prototype=Object.create(H5P.EventDispatcher.prototype);JoubelHelpTextDialog.prototype.constructor=JoubelHelpTextDialog;return JoubelHelpTextDialog;}(H5P.jQuery));;var H5P=H5P||{};H5P.JoubelMessageDialog=(function($){function JoubelMessageDialog($container,message){var timeout;var removeDialog=function(){$warning.remove();clearTimeout(timeout);$container.off('click.messageDialog');};var $warning=$('<div/>',{'class':'joubel-message-dialog',text:message}).appendTo($container);timeout=setTimeout(removeDialog,3000);$container.on('click.messageDialog',removeDialog);return $warning;}
return JoubelMessageDialog;})(H5P.jQuery);;var H5P=H5P||{};H5P.JoubelProgressCircle=(function($){function ProgressCircle(number,progressColor,fillColor,backgroundColor){progressColor=progressColor||'#1a73d9';fillColor=fillColor||'#f0f0f0';backgroundColor=backgroundColor||'#ffffff';var progressColorRGB=this.hexToRgb(progressColor);try{number=Number(number);if(number===''){throw'is empty';}
if(isNaN(number)){throw'is not a number';}}catch(e){number='err';}
if(number>100){number=100;}
var progressColorString='rgb('+parseInt(progressColorRGB.r,10)+','+parseInt(progressColorRGB.g,10)+','+parseInt(progressColorRGB.b,10)+')';var $wrapper=$('<div/>',{'class':"joubel-progress-circle-wrapper"});var $activeBorder=$('<div/>',{'class':"joubel-progress-circle-active-border"}).appendTo($wrapper);var $backgroundCircle=$('<div/>',{'class':"joubel-progress-circle-circle"}).appendTo($activeBorder);$('<span/>',{'text':number+'%','class':"joubel-progress-circle-percentage"}).appendTo($backgroundCircle);var deg=number*3.6;if(deg<=180){$activeBorder.css('background-image','linear-gradient('+(90+deg)+'deg, transparent 50%, '+fillColor+' 50%),'+'linear-gradient(90deg, '+fillColor+' 50%, transparent 50%)').css('border','2px solid'+backgroundColor).css('background-color',progressColorString);}else{$activeBorder.css('background-image','linear-gradient('+(deg-90)+'deg, transparent 50%, '+progressColorString+' 50%),'+'linear-gradient(90deg, '+fillColor+' 50%, transparent 50%)').css('border','2px solid'+backgroundColor).css('background-color',progressColorString);}
this.$activeBorder=$activeBorder;this.$backgroundCircle=$backgroundCircle;this.$wrapper=$wrapper;this.initResizeFunctionality();return $wrapper;}
ProgressCircle.prototype.initResizeFunctionality=function(){var self=this;$(window).resize(function(){setTimeout(function(){self.resize();});});setTimeout(function(){self.resize();},0);};ProgressCircle.prototype.resize=function(){var $parent=this.$wrapper.parent();if($parent!==undefined&&$parent){var fontSize=parseInt($parent.css('font-size'),10);var fontSizeMultiplum=3.75;var progressCircleWidthPx=parseInt((fontSize/4.5),10)%2===0?parseInt((fontSize/4.5),10)+4:parseInt((fontSize/4.5),10)+5;var progressCircleOffset=progressCircleWidthPx/2;var width=fontSize*fontSizeMultiplum;var height=fontSize*fontSizeMultiplum;this.$activeBorder.css({'width':width,'height':height});this.$backgroundCircle.css({'width':width-progressCircleWidthPx,'height':height-progressCircleWidthPx,'top':progressCircleOffset,'left':progressCircleOffset});}};ProgressCircle.prototype.hexToRgb=function(hex){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;};return ProgressCircle;}(H5P.jQuery));;var H5P=H5P||{};H5P.SimpleRoundedButton=(function($){function SimpleRoundedButton(text){var $simpleRoundedButton=$('<div>',{'class':'joubel-simple-rounded-button','title':text,'role':'button','tabindex':'0'}).keydown(function(e){if([32,13].indexOf(e.which)!==-1){$(this).click();e.preventDefault();}});$('<span>',{'class':'joubel-simple-rounded-button-text','html':text}).appendTo($simpleRoundedButton);return $simpleRoundedButton;}
return SimpleRoundedButton;}(H5P.jQuery));;var H5P=H5P||{};H5P.JoubelSpeechBubble=(function($){var $currentSpeechBubble;var $currentContainer;var $tail;var $innerTail;var removeSpeechBubbleTimeout;var currentMaxWidth;var DEFAULT_MAX_WIDTH=400;var iDevice=navigator.userAgent.match(/iPod|iPhone|iPad/g)?true:false;function JoubelSpeechBubble($container,text,maxWidth){maxWidth=maxWidth||DEFAULT_MAX_WIDTH;currentMaxWidth=maxWidth;$currentContainer=$container;this.isCurrent=function($tip){return $tip.is($currentContainer);};this.remove=function(){remove();};var fadeOutSpeechBubble=function($speechBubble){if(!$speechBubble){return;}
clearTimeout(removeSpeechBubbleTimeout);$speechBubble.removeClass('show');setTimeout(function(){if($speechBubble){$speechBubble.remove();$speechBubble=undefined;}},500);};if($currentSpeechBubble!==undefined){remove();}
var $h5pContainer=getH5PContainer($container);fadeOutSpeechBubble($currentSpeechBubble);$tail=$('<div class="joubel-speech-bubble-tail"></div>');$innerTail=$('<div class="joubel-speech-bubble-inner-tail"></div>');var $innerBubble=$('<div class="joubel-speech-bubble-inner">'+'<div class="joubel-speech-bubble-text">'+text+'</div>'+'</div>').prepend($innerTail);$currentSpeechBubble=$('<div class="joubel-speech-bubble" aria-live="assertive">').append([$tail,$innerBubble]).appendTo($h5pContainer);setTimeout(function(){$currentSpeechBubble.addClass('show');},0);position($currentSpeechBubble,$currentContainer,maxWidth,$tail,$innerTail);H5P.$body.on('mousedown.speechBubble',handleOutsideClick);H5P.$window.on('resize','',handleResize);$container.parents('.h5p-dialog').on('mousedown.speechBubble',handleOutsideClick);if(iDevice){H5P.$body.css('cursor','pointer');}
return this;}
H5P.externalDispatcher.on('domHidden',function(event){if($currentSpeechBubble!==undefined&&event.data.$dom.find($currentContainer).length!==0){remove();}});function getH5PContainer($container){var $h5pContainer=$container.closest('.h5p-frame');if(!$h5pContainer.length){$h5pContainer=$container.closest('.h5p-container');}
return $h5pContainer;}
function handleResize(){position($currentSpeechBubble,$currentContainer,currentMaxWidth,$tail,$innerTail);}
function position($currentSpeechBubble,$container,maxWidth,$tail,$innerTail){var $h5pContainer=getH5PContainer($container);var offset=getOffsetBetween($h5pContainer,$container);var direction=(offset.bottom>offset.top?'bottom':'top');var tipWidth=offset.outerWidth*0.9;var bubbleWidth=tipWidth>maxWidth?maxWidth:tipWidth;var bubblePosition=getBubblePosition(bubbleWidth,offset);var tailPosition=getTailPosition(bubbleWidth,bubblePosition,offset,$container.width());var fontSize=16;$currentSpeechBubble.css(bubbleCSS(direction,bubbleWidth,bubblePosition,fontSize));var preparedTailCSS=tailCSS(direction,tailPosition);$tail.css(preparedTailCSS);$innerTail.css(preparedTailCSS);}
var remove=function(){H5P.$body.off('mousedown.speechBubble');H5P.$window.off('resize','',handleResize);$currentContainer.parents('.h5p-dialog').off('mousedown.speechBubble');if(iDevice){H5P.$body.css('cursor','');}
if($currentSpeechBubble!==undefined){$currentSpeechBubble.removeClass('show');clearTimeout(removeSpeechBubbleTimeout);removeSpeechBubbleTimeout=setTimeout(function(){$currentSpeechBubble.remove();$currentSpeechBubble=undefined;},500);}};function handleOutsideClick(event){if(event.target===$currentContainer[0]){return;}
remove();$currentContainer=undefined;}
function getBubblePosition(bubbleWidth,offset){var bubblePosition={};var tailOffset=9;var widthOffset=bubbleWidth/2;bubblePosition.top=offset.top+offset.innerHeight;bubblePosition.bottom=offset.bottom+offset.innerHeight+tailOffset;if(offset.left<widthOffset){bubblePosition.left=3;}
else if((offset.left+widthOffset)>offset.outerWidth){bubblePosition.left=offset.outerWidth-bubbleWidth-3;}
else{bubblePosition.left=offset.left-widthOffset+(offset.innerWidth/2);}
return bubblePosition;}
function getTailPosition(bubbleWidth,bubblePosition,offset,iconWidth){var tailPosition={};var leftBoundary=9;var rightBoundary=bubbleWidth-20;tailPosition.left=offset.left-bubblePosition.left+(iconWidth/2)-6;if(tailPosition.left<leftBoundary){tailPosition.left=leftBoundary;}
if(tailPosition.left>rightBoundary){tailPosition.left=rightBoundary;}
tailPosition.top=-6;tailPosition.bottom=-6;return tailPosition;}
function bubbleCSS(direction,width,position,fontSize){if(direction==='top'){return{width:width+'px',bottom:position.bottom+'px',left:position.left+'px',fontSize:fontSize+'px',top:''};}
else{return{width:width+'px',top:position.top+'px',left:position.left+'px',fontSize:fontSize+'px',bottom:''};}}
function tailCSS(direction,position){if(direction==='top'){return{bottom:position.bottom+'px',left:position.left+'px',top:''};}
else{return{top:position.top+'px',left:position.left+'px',bottom:''};}}
function getOffsetBetween($outer,$inner){var outer=$outer[0].getBoundingClientRect();var inner=$inner[0].getBoundingClientRect();return{top:inner.top-outer.top,right:outer.right-inner.right,bottom:outer.bottom-inner.bottom,left:inner.left-outer.left,innerWidth:inner.width,innerHeight:inner.height,outerWidth:outer.width,outerHeight:outer.height};}
return JoubelSpeechBubble;})(H5P.jQuery);;var H5P=H5P||{};H5P.JoubelThrobber=(function($){function JoubelThrobber(){var $throbber=$('<div/>',{'class':'h5p-throbber'});return $throbber;}
return JoubelThrobber;}(H5P.jQuery));;H5P.JoubelTip=(function($){var $conv=$('<div/>');function JoubelTip(tipHtml,behaviour){var speechBubble;var tipText=$conv.html(tipHtml).text().trim();if(tipText===''){return;}
behaviour=$.extend({tipLabel:tipText,helpIcon:false,showSpeechBubble:true,tabcontrol:false},behaviour);var $tipButton=$('<div/>',{class:'joubel-tip-container'+(behaviour.showSpeechBubble?'':' be-quiet'),title:behaviour.tipLabel,'aria-label':behaviour.tipLabel,'aria-expanded':false,role:'button',tabindex:(behaviour.tabcontrol?-1:0),click:function(event){toggleSpeechBubble();event.preventDefault();},keydown:function(event){if(event.which===32||event.which===13){toggleSpeechBubble();event.stopPropagation();event.preventDefault();}
else{toggleSpeechBubble(false);}},html:'<span class="joubel-icon-tip-normal '+(behaviour.helpIcon?' help-icon':'')+'">'+'<span class="h5p-icon-shadow"></span>'+'<span class="h5p-icon-speech-bubble"></span>'+'<span class="h5p-icon-info"></span>'+'</span>'});const $tipAnnouncer=$('<div>',{'class':'hidden-but-read','aria-live':'polite',appendTo:$tipButton,});var toggleSpeechBubble=function(force){if(speechBubble!==undefined&&speechBubble.isCurrent($tipButton)){speechBubble.remove();speechBubble=undefined;$tipButton.attr('aria-expanded',false);$tipAnnouncer.html('');}
else if(force!==false&&behaviour.showSpeechBubble){speechBubble=H5P.JoubelSpeechBubble($tipButton,tipHtml);$tipButton.attr('aria-expanded',true);$tipAnnouncer.html(tipHtml);}};return $tipButton;}
return JoubelTip;})(H5P.jQuery);;var H5P=H5P||{};H5P.JoubelSlider=(function($){function JoubelSlider(params){H5P.EventDispatcher.call(this);this.$slider=$('<div>',$.extend({'class':'h5p-joubel-ui-slider'},params));this.$slides=[];this.currentIndex=0;this.numSlides=0;}
JoubelSlider.prototype=Object.create(H5P.EventDispatcher.prototype);JoubelSlider.prototype.constructor=JoubelSlider;JoubelSlider.prototype.addSlide=function($content){$content.addClass('h5p-joubel-ui-slide').css({'left':(this.numSlides*100)+'%'});this.$slider.append($content);this.$slides.push($content);this.numSlides++;if(this.numSlides===1){$content.addClass('current');}};JoubelSlider.prototype.attach=function($container){$container.append(this.$slider);};JoubelSlider.prototype.move=function(index){var self=this;if(index===0){self.trigger('first-slide');}
if(index+1===self.numSlides){self.trigger('last-slide');}
self.trigger('move');var $previousSlide=self.$slides[this.currentIndex];H5P.Transition.onTransitionEnd(this.$slider,function(){$previousSlide.removeClass('current');self.trigger('moved');});this.$slides[index].addClass('current');var translateX='translateX('+(-index*100)+'%)';this.$slider.css({'-webkit-transform':translateX,'-moz-transform':translateX,'-ms-transform':translateX,'transform':translateX});this.currentIndex=index;};JoubelSlider.prototype.remove=function(){this.$slider.remove();};JoubelSlider.prototype.next=function(){if(this.currentIndex+1>=this.numSlides){return;}
this.move(this.currentIndex+1);};JoubelSlider.prototype.previous=function(){this.move(this.currentIndex-1);};JoubelSlider.prototype.first=function(){this.move(0);};JoubelSlider.prototype.last=function(){this.move(this.numSlides-1);};return JoubelSlider;})(H5P.jQuery);;var H5P=H5P||{};H5P.JoubelScoreBar=(function($){var idCounter=0;function JoubelScoreBar(maxScore,label,helpText,scoreExplanationButtonLabel){var self=this;self.maxScore=maxScore;self.score=0;idCounter++;self.STAR_MARKUP='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 63.77 53.87" aria-hidden="true" focusable="false">'+'<title>star</title>'+'<filter id="h5p-joubelui-score-bar-star-inner-shadow-'+idCounter+'" x0="-50%" y0="-50%" width="200%" height="200%">'+'<feGaussianBlur in="SourceAlpha" stdDeviation="3" result="blur"></feGaussianBlur>'+'<feOffset dy="2" dx="4"></feOffset>'+'<feComposite in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowDiff"></feComposite>'+'<feFlood flood-color="#ffe95c" flood-opacity="1"></feFlood>'+'<feComposite in2="shadowDiff" operator="in"></feComposite>'+'<feComposite in2="SourceGraphic" operator="over" result="firstfilter"></feComposite>'+'<feGaussianBlur in="firstfilter" stdDeviation="3" result="blur2"></feGaussianBlur>'+'<feOffset dy="-2" dx="-4"></feOffset>'+'<feComposite in2="firstfilter" operator="arithmetic" k2="-1" k3="1" result="shadowDiff"></feComposite>'+'<feFlood flood-color="#ffe95c" flood-opacity="1"></feFlood>'+'<feComposite in2="shadowDiff" operator="in"></feComposite>'+'<feComposite in2="firstfilter" operator="over"></feComposite>'+'</filter>'+'<path class="h5p-joubelui-score-bar-star-shadow" d="M35.08,43.41V9.16H20.91v0L9.51,10.85,9,10.93C2.8,12.18,0,17,0,21.25a11.22,11.22,0,0,0,3,7.48l8.73,8.53-1.07,6.16Z"/>'+'<g>'+'<path class="h5p-joubelui-score-bar-star-border" d="M61.36,22.8,49.72,34.11l2.78,16a2.6,2.6,0,0,1,.05.64c0,.85-.37,1.6-1.33,1.6A2.74,2.74,0,0,1,49.94,52L35.58,44.41,21.22,52a2.93,2.93,0,0,1-1.28.37c-.91,0-1.33-.75-1.33-1.6,0-.21.05-.43.05-.64l2.78-16L9.8,22.8A2.57,2.57,0,0,1,9,21.25c0-1,1-1.33,1.81-1.49l16.07-2.35L34.09,2.83c.27-.59.85-1.33,1.55-1.33s1.28.69,1.55,1.33l7.21,14.57,16.07,2.35c.75.11,1.81.53,1.81,1.49A3.07,3.07,0,0,1,61.36,22.8Z"/>'+'<path class="h5p-joubelui-score-bar-star-fill" d="M61.36,22.8,49.72,34.11l2.78,16a2.6,2.6,0,0,1,.05.64c0,.85-.37,1.6-1.33,1.6A2.74,2.74,0,0,1,49.94,52L35.58,44.41,21.22,52a2.93,2.93,0,0,1-1.28.37c-.91,0-1.33-.75-1.33-1.6,0-.21.05-.43.05-.64l2.78-16L9.8,22.8A2.57,2.57,0,0,1,9,21.25c0-1,1-1.33,1.81-1.49l16.07-2.35L34.09,2.83c.27-.59.85-1.33,1.55-1.33s1.28.69,1.55,1.33l7.21,14.57,16.07,2.35c.75.11,1.81.53,1.81,1.49A3.07,3.07,0,0,1,61.36,22.8Z"/>'+'<path filter="url(#h5p-joubelui-score-bar-star-inner-shadow-'+idCounter+')" class="h5p-joubelui-score-bar-star-fill-full-score" d="M61.36,22.8,49.72,34.11l2.78,16a2.6,2.6,0,0,1,.05.64c0,.85-.37,1.6-1.33,1.6A2.74,2.74,0,0,1,49.94,52L35.58,44.41,21.22,52a2.93,2.93,0,0,1-1.28.37c-.91,0-1.33-.75-1.33-1.6,0-.21.05-.43.05-.64l2.78-16L9.8,22.8A2.57,2.57,0,0,1,9,21.25c0-1,1-1.33,1.81-1.49l16.07-2.35L34.09,2.83c.27-.59.85-1.33,1.55-1.33s1.28.69,1.55,1.33l7.21,14.57,16.07,2.35c.75.11,1.81.53,1.81,1.49A3.07,3.07,0,0,1,61.36,22.8Z"/>'+'</g>'+'</svg>';self.appendTo=function($wrapper){self.$scoreBar.appendTo($wrapper);};var createLabel=function(score){if(!label){return'';}
return label.replace(':num',score).replace(':total',self.maxScore);};var createHtml=function(){self.$scoreBar=$('<div>',{'class':'h5p-joubelui-score-bar',});var $visuals=$('<div>',{'class':'h5p-joubelui-score-bar-visuals',appendTo:self.$scoreBar});self.$progressWrapper=$('<div>',{'class':'h5p-joubelui-score-bar-progress-wrapper',appendTo:$visuals});self.$progress=$('<div>',{'class':'h5p-joubelui-score-bar-progress','html':createLabel(self.score),appendTo:self.$progressWrapper});$('<div>',{'class':'h5p-joubelui-score-bar-star',html:self.STAR_MARKUP}).appendTo($visuals);var $numerics=$('<div>',{'class':'h5p-joubelui-score-numeric',appendTo:self.$scoreBar,'aria-hidden':true});self.$scoreCounter=$('<span>',{'class':'h5p-joubelui-score-number h5p-joubelui-score-number-counter',text:0,appendTo:$numerics});$('<span>',{'class':'h5p-joubelui-score-number-separator',text:'/',appendTo:$numerics});self.$maxScore=$('<span>',{'class':'h5p-joubelui-score-number h5p-joubelui-score-max',text:self.maxScore,appendTo:$numerics});if(helpText){H5P.JoubelUI.createTip(helpText,{tipLabel:scoreExplanationButtonLabel?scoreExplanationButtonLabel:helpText,helpIcon:true}).appendTo(self.$scoreBar);self.$scoreBar.addClass('h5p-score-bar-has-help');}};self.setScore=function(score){if(score===self.score){return;}
self.score=score>self.maxScore?self.maxScore:score;self.updateVisuals();};self.incrementScore=function(incrementBy){self.setScore(self.score+(incrementBy||1));};self.setMaxScore=function(maxScore){self.maxScore=maxScore;};self.updateVisuals=function(){self.$progress.html(createLabel(self.score));self.$scoreCounter.text(self.score);self.$maxScore.text(self.maxScore);setTimeout(function(){self.$progress.css({width:((self.score/self.maxScore)*100)+'%'});H5P.Transition.onTransitionEnd(self.$progress,function(){self.$scoreBar.toggleClass('h5p-joubelui-score-bar-full-score',self.score===self.maxScore);self.$scoreBar.toggleClass('h5p-joubelui-score-bar-animation-active',self.score===self.maxScore);self.$scoreBar.one("animationend",function(){self.$scoreBar.removeClass("h5p-joubelui-score-bar-animation-active");});},600);},300);};self.reset=function(){self.$scoreBar.removeClass('h5p-joubelui-score-bar-full-score');};createHtml();}
return JoubelScoreBar;})(H5P.jQuery);;var H5P=H5P||{};H5P.JoubelProgressbar=(function($){function JoubelProgressbar(steps,options){H5P.EventDispatcher.call(this);var self=this;this.options=$.extend({progressText:'Slide :num of :total'},options);this.currentStep=0;this.steps=steps;this.$progressbar=$('<div>',{'class':'h5p-joubelui-progressbar',on:{click:function(){self.toggleTooltip();return false;},mouseenter:function(){self.showTooltip();},mouseleave:function(){setTimeout(function(){self.hideTooltip();},1500);}}});this.$background=$('<div>',{'class':'h5p-joubelui-progressbar-background'}).appendTo(this.$progressbar);$('body').click(function(){self.toggleTooltip(true);});}
JoubelProgressbar.prototype=Object.create(H5P.EventDispatcher.prototype);JoubelProgressbar.prototype.constructor=JoubelProgressbar;JoubelProgressbar.prototype.showTooltip=function(){var self=this;if(this.currentStep===0||this.tooltip!==undefined){return;}
var parentWidth=self.$progressbar.offset().left+self.$progressbar.width();this.tooltip=new H5P.Drop({target:this.$background.get(0),content:this.currentStep+'/'+this.steps,classes:'drop-theme-arrows-bounce h5p-joubelui-drop',position:'top right',openOn:'always',tetherOptions:{attachment:'bottom center',targetAttachment:'top right'}});this.tooltip.on('open',function(){var $drop=$(self.tooltip.drop);var left=$drop.position().left;var dropWidth=$drop.width();if(left<0){$drop.css({marginLeft:(-left)+'px'});}
else if(left+dropWidth>parentWidth){$drop.css({marginLeft:(parentWidth-(left+dropWidth))+'px'});}});};JoubelProgressbar.prototype.updateAria=function(){var self=this;if(this.options.disableAria){return;}
if(!this.$currentStatus){this.$currentStatus=$('<div>',{'class':'h5p-joubelui-progressbar-slide-status-text','aria-live':'assertive'}).appendTo(this.$progressbar);}
var interpolatedProgressText=self.options.progressText.replace(':num',self.currentStep).replace(':total',self.steps);this.$currentStatus.html(interpolatedProgressText);};JoubelProgressbar.prototype.hideTooltip=function(){if(this.tooltip!==undefined){this.tooltip.remove();this.tooltip.destroy();this.tooltip=undefined;}};JoubelProgressbar.prototype.toggleTooltip=function(closeOnly){if(this.tooltip===undefined&&!closeOnly){this.showTooltip();}
else if(this.tooltip!==undefined){this.hideTooltip();}};JoubelProgressbar.prototype.appendTo=function($container){this.$progressbar.appendTo($container);};JoubelProgressbar.prototype.setProgress=function(step){if(step>this.steps||step<0){return;}
this.currentStep=step;this.$background.css({width:((this.currentStep/this.steps)*100)+'%'});this.updateAria();};JoubelProgressbar.prototype.next=function(){this.setProgress(this.currentStep+1);};JoubelProgressbar.prototype.reset=function(){this.setProgress(0);};JoubelProgressbar.prototype.isLastStep=function(){return this.steps===this.currentStep;};return JoubelProgressbar;})(H5P.jQuery);;var H5P=H5P||{};H5P.JoubelUI=(function($){function JoubelUI(){}
JoubelUI.createTip=function(text,params){return new H5P.JoubelTip(text,params);};JoubelUI.createMessageDialog=function($container,message){return new H5P.JoubelMessageDialog($container,message);};JoubelUI.createHelpTextDialog=function(header,message,closeButtonTitle){return new H5P.JoubelHelpTextDialog(header,message,closeButtonTitle);};JoubelUI.createProgressCircle=function(number,progressColor,fillColor,backgroundColor){return new H5P.JoubelProgressCircle(number,progressColor,fillColor,backgroundColor);};JoubelUI.createThrobber=function(){return new H5P.JoubelThrobber();};JoubelUI.createSimpleRoundedButton=function(text){return new H5P.SimpleRoundedButton(text);};JoubelUI.createSlider=function(params){return new H5P.JoubelSlider(params);};JoubelUI.createScoreBar=function(maxScore,label,helpText,scoreExplanationButtonLabel){return new H5P.JoubelScoreBar(maxScore,label,helpText,scoreExplanationButtonLabel);};JoubelUI.createProgressbar=function(numSteps,options){return new H5P.JoubelProgressbar(numSteps,options);};JoubelUI.createButton=function(params){var type='button';if(params.href){type='a';}
else{params.type='button';}
if(params.class){params.class+=' h5p-joubelui-button';}
else{params.class='h5p-joubelui-button';}
return $('<'+type+'/>',params);};if(H5P.isFramed&&!H5P.hasiOSiframeScrollFix&&/iPad|iPhone|iPod/.test(navigator.userAgent)){H5P.hasiOSiframeScrollFix=true;var focus=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){if((this instanceof HTMLAnchorElement||this instanceof HTMLInputElement||this instanceof HTMLSelectElement||this instanceof HTMLTextAreaElement||this instanceof HTMLButtonElement||this instanceof HTMLIFrameElement||this instanceof HTMLAreaElement)&&!this.getAttribute('role')){focus.call(this);}};}
return JoubelUI;})(H5P.jQuery);;H5P.Question=(function($,EventDispatcher,JoubelUI){function Question(type){var self=this;EventDispatcher.call(self);self.order=['video','image','introduction','content','explanation','feedback','scorebar','buttons','read'];var sections={};var buttons={};var buttonOrder=[];var $wrapper;var clickElement;var scoreBar;var showFeedback;var buttonsToHide=[];var buttonsToShow=[];var toggleButtonsTimer;var toggleButtonsTransitionTimer;var buttonTruncationTimer;var initialized=false;var behaviour={disableFeedback:false,disableReadSpeaker:false};var imageThumb=true;var imageTransitionTimer;var sectionsIsTransitioning=false;var disableAutoPlay=false;var feedbackTransitionTimer;var $read,readText;var register=function(section,content){sections[section]={};var $e=sections[section].$element=$('<div/>',{'class':'h5p-question-'+section,});if(content){$e[content instanceof $?'append':'html'](content);}};var update=function(section,content){if(content instanceof $){sections[section].$element.html('').append(content);}
else{sections[section].$element.html(content);}};var insert=function(order,id,elements,$container){for(var i=0;i<order.length;i++){if(order[i]===id){while(i>0&&(elements[order[i-1]]===undefined||!elements[order[i-1]].isVisible)){i--;}
if(i===0){elements[id].$element.prependTo($container);}
else{elements[id].$element.insertAfter(elements[order[i-1]].$element);}
elements[id].isVisible=true;break;}}};var makeFeedbackPopup=function(closeText){var $element=sections.feedback.$element;var $parent=sections.content.$element;var $click=(clickElement!=null?clickElement.$element:null);$element.appendTo($parent).addClass('h5p-question-popup');if(sections.scorebar){sections.scorebar.$element.appendTo($element);}
$parent.addClass('h5p-has-question-popup');var $tail=$('<div/>',{'class':'h5p-question-feedback-tail'}).hide().appendTo($parent);var $close=$('<div/>',{'class':'h5p-question-feedback-close','tabindex':0,'title':closeText,on:{click:function(event){$element.remove();$tail.remove();event.preventDefault();},keydown:function(event){switch(event.which){case 13:case 32:$element.remove();$tail.remove();event.preventDefault();}}}}).hide().appendTo($element);if($click!=null){if($click.hasClass('correct')){$element.addClass('h5p-question-feedback-correct');$close.show();sections.buttons.$element.hide();}
else{sections.buttons.$element.appendTo(sections.feedback.$element);}}
positionFeedbackPopup($element,$click);};var positionFeedbackPopup=function($element,$click){var $container=$element.parent();var $tail=$element.siblings('.h5p-question-feedback-tail');var popupWidth=$element.outerWidth();var popupHeight=setElementHeight($element);var space=15;var disableTail=false;var positionY=$container.height()/2-popupHeight/2;var positionX=$container.width()/2-popupWidth/2;var tailX=0;var tailY=0;var tailRotation=0;if($click!=null){var clickNearTop=($click[0].offsetTop<space);var clickNearBottom=($click[0].offsetTop+$click.height()>$container.height()-space);var clickNearLeft=($click[0].offsetLeft<space);var clickNearRight=($click[0].offsetLeft+$click.width()>$container.width()-space);positionX=$click[0].offsetLeft-popupWidth/2+$click.width()/2;positionY=$click[0].offsetTop-popupHeight-space;tailX=positionX+popupWidth/2-$tail.width()/2;tailY=positionY+popupHeight-($tail.height()/2);tailRotation=225;if(popupHeight+space>$click[0].offsetTop){positionY=$click[0].offsetTop+$click.height()+space;tailY=positionY-$tail.height()/2;tailRotation=45;}
if(positionX<0){positionX=0;}
if(positionX+popupWidth>$container.width()){positionX=$container.width()-popupWidth;}
if(clickNearTop&&(clickNearLeft||clickNearRight)){positionX=$click[0].offsetLeft+(clickNearLeft?$click.width():-popupWidth);positionY=$click[0].offsetTop+$click.height();disableTail=true;}
else if(clickNearBottom&&(clickNearLeft||clickNearRight)){positionX=$click[0].offsetLeft+(clickNearLeft?$click.width():-popupWidth);positionY=$click[0].offsetTop-popupHeight;disableTail=true;}
else if(!clickNearTop&&!clickNearBottom){if(clickNearLeft||clickNearRight){positionY=$click[0].offsetTop-popupHeight/2+$click.width()/2;positionX=$click[0].offsetLeft+(clickNearLeft?$click.width()+space:-popupWidth+ -space);if(positionX<0){positionX=0;disableTail=true;}
else{tailX=positionX+(clickNearLeft?-$tail.width()/2:popupWidth-$tail.width()/2);tailY=positionY+popupHeight/2-$tail.height()/2;tailRotation=(clickNearLeft?315:135);}}}
if(positionY+popupHeight>$container.height()){positionY=$container.height()-popupHeight;if(popupHeight>$container.height()-($click[0].offsetTop+$click.height()+space)){disableTail=true;}}}
else{disableTail=true;}
if(positionY<0){positionY=0;}
$element.css({top:positionY,left:positionX});$tail.css({top:tailY,left:tailX});if(!disableTail){$tail.css({'left':tailX,'top':tailY,'transform':'rotate('+tailRotation+'deg)'}).show();}
else{$tail.hide();}};var setElementHeight=function($element){if(!$element.is(':visible')){$element.css('max-height','none');return;}
var isFeedbackPopup=$element.hasClass('h5p-question-popup');var $tmp=$element.clone().css({'position':'absolute','max-height':'none','width':isFeedbackPopup?'':'100%'}).appendTo($element.parent());var sideMargins=parseFloat($element.css('margin-left'))
+parseFloat($element.css('margin-right'));var tmpElWidth=$tmp.css('width')?$tmp.css('width'):'100%';$tmp.css('width','calc('+tmpElWidth+' - '+sideMargins+'px)');var h=Math.round($tmp.get(0).getBoundingClientRect().height);var fontSize=parseFloat($element.css('fontSize'));var relativeH=h/fontSize;$element.css('max-height',relativeH+'em');$tmp.remove();if(h>0&&sections.buttons&&sections.buttons.$element===$element){showSection(sections.buttons);setTimeout(resizeButtons,150);}
return h;};var hideButtons=function(relocateFocus){for(var i=0;i<buttonsToHide.length;i++){hideButton(buttonsToHide[i].id);}
buttonsToHide=[];if(relocateFocus){self.focusButton();}};var hideButton=function(buttonId){buttons[buttonId].$element.detach();buttons[buttonId].isVisible=false;};var toggleButtons=function(){if(sections.buttons===undefined){return;}
clearTimeout(toggleButtonsTransitionTimer);for(var i=0;i<buttonsToShow.length;i++){insert(buttonOrder,buttonsToShow[i].id,buttons,sections.buttons.$element);buttons[buttonsToShow[i].id].isVisible=true;}
buttonsToShow=[];var numToHide=0;var relocateFocus=false;for(var j=0;j<buttonsToHide.length;j++){var button=buttons[buttonsToHide[j].id];if(button.isVisible){numToHide+=1;}
if(button.$element.is(':focus')){relocateFocus=true;}}
var animationTimer=150;if(sections.feedback&&sections.feedback.$element.hasClass('h5p-question-popup')){animationTimer=0;}
if(numToHide===sections.buttons.$element.children().length){hideSection(sections.buttons);hideButtons(relocateFocus);}
else{hideButtons(relocateFocus);if(!sections.buttons.$element.is(':empty')){showSection(sections.buttons);setElementHeight(sections.buttons.$element);toggleButtonsTransitionTimer=setTimeout(function(){self.trigger('resize');},animationTimer);}
resizeButtons();}
toggleButtonsTimer=undefined;};var scaleImage=function(){var $imgSection=sections.image.$element;clearTimeout(imageTransitionTimer);$imgSection.addClass('animatable');if(imageThumb){$(this).attr('aria-expanded',true);$imgSection.addClass('h5p-question-image-fill-width');imageThumb=false;imageTransitionTimer=setTimeout(function(){self.trigger('resize');},600);}
else{$(this).attr('aria-expanded',false);$imgSection.removeClass('h5p-question-image-fill-width');imageThumb=true;imageTransitionTimer=setTimeout(function(){self.trigger('resize');},600);}};var findScrollableAncestor=function($element,currDepth,maxDepth){if(!currDepth){currDepth=0;}
if(!maxDepth){maxDepth=5;}
if(!$element||!($element instanceof $)||document===$element.get(0)||currDepth>=maxDepth){return;}
if($element.css('overflow-y')==='auto'){return $element;}
else{return findScrollableAncestor($element.parent(),currDepth+1,maxDepth);}};var scrollToBottom=function(){if(!$wrapper||($wrapper.hasClass('h5p-standalone')&&!H5P.isFullscreen)){return;}
var scrollableAncestor=findScrollableAncestor($wrapper);if(scrollableAncestor){scrollableAncestor.animate({scrollTop:$wrapper.css('height')},"slow");}};var resizeButtons=function(){if(!buttons||!sections.buttons){return;}
var go=function(){if(!sections.buttons.$element.is(':visible')){return;}
var buttonsWidth={max:0,min:0,current:0};for(var i in buttons){var button=buttons[i];if(button.isVisible){setButtonWidth(buttons[i]);buttonsWidth.max+=button.width.max;buttonsWidth.min+=button.width.min;buttonsWidth.current+=button.isTruncated?button.width.min:button.width.max;}}
var makeButtonsFit=function(availableWidth){if(buttonsWidth.max<availableWidth){if(buttonsWidth.max!==buttonsWidth.current){restoreButtonLabels(buttonsWidth.current,availableWidth);}
return true;}
else if(buttonsWidth.min<availableWidth){if(buttonsWidth.current>availableWidth){removeButtonLabels(buttonsWidth.current,availableWidth);}
else{restoreButtonLabels(buttonsWidth.current,availableWidth);}
return true;}
return false;};toggleFullWidthScorebar(false);var buttonSectionWidth=Math.floor(sections.buttons.$element.width())-1;if(!makeButtonsFit(buttonSectionWidth)){toggleFullWidthScorebar(true);buttonSectionWidth=Math.floor(sections.buttons.$element.width())-1;makeButtonsFit(buttonSectionWidth);}};if(sections.buttons.$element.is(':visible')){go();}
else{if(buttonTruncationTimer){clearTimeout(buttonTruncationTimer);}
buttonTruncationTimer=setTimeout(function(){buttonTruncationTimer=undefined;go();},0);}};var toggleFullWidthScorebar=function(enabled){if(sections.scorebar&&sections.scorebar.$element&&sections.scorebar.$element.hasClass('h5p-question-visible')){sections.buttons.$element.addClass('has-scorebar');sections.buttons.$element.toggleClass('wrap',enabled);sections.scorebar.$element.toggleClass('full-width',enabled);}
else{sections.buttons.$element.removeClass('has-scorebar');}};var removeButtonLabels=function(buttonsWidth,maxButtonsWidth){for(var i=buttonOrder.length-1;i>=0;i--){var buttonId=buttonOrder[i];var button=buttons[buttonId];if(!button.isTruncated&&button.isVisible){var $button=button.$element;buttonsWidth-=button.width.max-button.width.min;button.$element.attr('aria-label',$button.text()).html('').addClass('truncated');button.isTruncated=true;if(buttonsWidth<=maxButtonsWidth){return;}}}};var restoreButtonLabels=function(buttonsWidth,maxButtonsWidth){for(var i=0;i<buttonOrder.length;i++){var buttonId=buttonOrder[i];var button=buttons[buttonId];if(button.isTruncated&&button.isVisible){buttonsWidth+=button.width.max-button.width.min+1;if(buttonsWidth>maxButtonsWidth){return;}
button.$element.html(button.text);button.$element.removeClass('truncated');button.isTruncated=false;}}};var existsInArray=function(keyValue,key,array){var i;for(i=0;i<array.length;i++){if(array[i][key]===keyValue){return i;}}
return-1;};var showSection=function(section){section.$element.addClass('h5p-question-visible');section.isVisible=true;};var hideSection=function(section){section.$element.css('max-height','');section.isVisible=false;setTimeout(function(){if(!section.isVisible){section.$element.removeClass('h5p-question-visible');}},150);};self.setBehaviour=function(options){$.extend(behaviour,options);};self.setVideo=function(params){sections.video={$element:$('<div/>',{'class':'h5p-question-video'})};if(disableAutoPlay&&params.params.playback){params.params.playback.autoplay=false;}
if(!params.params.visuals){params.params.visuals={};}
params.params.visuals.fit=false;sections.video.instance=H5P.newRunnable(params,self.contentId,sections.video.$element,true);var fromVideo=false;sections.video.instance.on('resize',function(){fromVideo=true;self.trigger('resize');fromVideo=false;});self.on('resize',function(){if(!fromVideo){sections.video.instance.trigger('resize');}});return self;};self.pause=function(){if(sections.video&&sections.video.isVisible){sections.video.instance.pause();}};self.play=function(){if(sections.video&&sections.video.isVisible){sections.video.instance.play();}};self.disableAutoPlay=function(){disableAutoPlay=true;};self.setImage=function(path,options){options=options?options:{};sections.image={};sections.image.$element=$('<div/>',{'class':'h5p-question-image h5p-question-image-fill-width'});var $imgWrap=$('<div/>',{'class':'h5p-question-image-wrap',appendTo:sections.image.$element});var $img=$('<img/>',{src:H5P.getPath(path,self.contentId),alt:(options.alt===undefined?'':options.alt),title:(options.title===undefined?'':options.title),on:{load:function(){self.trigger('imageLoaded',this);self.trigger('resize');}},appendTo:$imgWrap});if(options.disableImageZooming){$img.css('maxHeight','none');var determineImgWidth=function(){var imageSectionWidth=sections.image.$element.get(0).getBoundingClientRect().width;$imgWrap.css({'-webkit-transition':'none','transition':'none'});var diffX=2*($imgWrap.get(0).getBoundingClientRect().left-
sections.image.$element.get(0).getBoundingClientRect().left);if($img.get(0).naturalWidth>=imageSectionWidth-diffX){sections.image.$element.addClass('h5p-question-image-fill-width');}
else{sections.image.$element.removeClass('h5p-question-image-fill-width');}
$imgWrap.css({'-webkit-transition':'','transition':''});};if($img.is(':visible')){determineImgWidth();}
else{$img.on('load',determineImgWidth);}
return;}
var sizeDetermined=false;var determineSize=function(){if(sizeDetermined||!$img.is(':visible')){return;}
$imgWrap.addClass('h5p-question-image-scalable').attr('aria-expanded',false).attr('role','button').attr('tabIndex','0').on('click',function(event){if(event.which===1){scaleImage.apply(this);}}).on('keypress',function(event){if(event.which===32){event.preventDefault();scaleImage.apply(this);}});sections.image.$element.removeClass('h5p-question-image-fill-width');sizeDetermined=true;};self.on('resize',determineSize);return self;};self.setIntroduction=function(content){register('introduction',content);return self;};self.setContent=function(content,options){register('content',content);if(options&&options.class){sections.content.$element.addClass(options.class);}
return self;};self.read=function(content){if(!$read){return;}
if(readText){readText+=(readText.substr(-1,1)==='.'?' ':'. ')+content;}
else{readText=content;}
$read.html(readText);setTimeout(function(){readText=null;$read.html('');},100);};self.readFeedback=function(){var invalidFeedback=behaviour.disableReadSpeaker||!showFeedback||!sections.feedback||!sections.feedback.$element;if(invalidFeedback){return;}
var $feedbackText=$('.h5p-question-feedback-content-text',sections.feedback.$element);if($feedbackText&&$feedbackText.html()&&$feedbackText.html().length){self.read($feedbackText.html());}};self.removeFeedback=function(){clearTimeout(feedbackTransitionTimer);if(sections.feedback&&showFeedback){showFeedback=false;hideSection(sections.scorebar);hideSection(sections.feedback);sectionsIsTransitioning=true;feedbackTransitionTimer=setTimeout(function(){if(!showFeedback){sections.feedback.$element.children().detach();sections.scorebar.$element.children().detach();self.trigger('resize');}
sectionsIsTransitioning=false;scoreBar.setScore(0);},150);if($wrapper){$wrapper.find('.h5p-question-feedback-tail').remove();}}
return self;};self.setFeedback=function(content,score,maxScore,scoreBarLabel,helpText,popupSettings,scoreExplanationButtonLabel){if(behaviour.disableFeedback){return self;}
toggleButtons();clickElement=(popupSettings!=null&&popupSettings.click!=null?popupSettings.click:null);clearTimeout(feedbackTransitionTimer);var $feedback=$('<div>',{'class':'h5p-question-feedback-container'});var $feedbackContent=$('<div>',{'class':'h5p-question-feedback-content'}).appendTo($feedback);$('<div>',{'class':'h5p-question-feedback-content-text','html':content}).appendTo($feedbackContent);var $scorebar=$('<div>',{'class':'h5p-question-scorebar-container'});if(scoreBar===undefined){scoreBar=JoubelUI.createScoreBar(maxScore,scoreBarLabel,helpText,scoreExplanationButtonLabel);}
scoreBar.appendTo($scorebar);$feedbackContent.toggleClass('has-content',content!==undefined&&content.length>0);if(!behaviour.disableReadSpeaker&&scoreBarLabel){self.read(scoreBarLabel.replace(':num',score).replace(':total',maxScore)+'. '+(content?content:''));}
showFeedback=true;if(sections.feedback){update('feedback',$feedback);update('scorebar',$scorebar);}
else{register('feedback',$feedback);register('scorebar',$scorebar);if(initialized&&$wrapper){insert(self.order,'feedback',sections,$wrapper);insert(self.order,'scorebar',sections,$wrapper);}}
showSection(sections.feedback);showSection(sections.scorebar);resizeButtons();if(popupSettings!=null&&popupSettings.showAsPopup==true){makeFeedbackPopup(popupSettings.closeText);scoreBar.setScore(score);}
else{feedbackTransitionTimer=setTimeout(function(){setElementHeight(sections.feedback.$element);setElementHeight(sections.scorebar.$element);sectionsIsTransitioning=true;scrollToBottom();feedbackTransitionTimer=setTimeout(function(){sectionsIsTransitioning=false;self.trigger('resize');scoreBar.setScore(score);},150);},0);}
return self;};self.updateFeedbackContent=function(content,extendContent){if(sections.feedback&&sections.feedback.$element){if(extendContent){content=$('.h5p-question-feedback-content',sections.feedback.$element).html()+' '+content;}
$('.h5p-question-feedback-content',sections.feedback.$element).html(content).addClass('has-content');setElementHeight(sections.feedback.$element);setTimeout(self.trigger.bind(self,'resize'),150);}
return self;};self.setExplanation=function(data,title){if(data){var explainer=new H5P.Question.Explainer(title,data);if(sections.explanation){update('explanation',explainer.getElement());}
else{register('explanation',explainer.getElement());if(initialized&&$wrapper){insert(self.order,'explanation',sections,$wrapper);}}}
else if(sections.explanation){sections.explanation.$element.children().detach();}
return self;};self.hasButton=function(id){return(buttons[id]!==undefined);};self.addButton=function(id,text,clicked,visible,options,extras){if(buttons[id]){return self;}
if(sections.buttons===undefined){register('buttons');if(initialized){insert(self.order,'buttons',sections,$wrapper);}}
extras=extras||{};extras.confirmationDialog=extras.confirmationDialog||{};options=options||{};var confirmationDialog=self.addConfirmationDialogToButton(extras.confirmationDialog,clicked);var handleButtonClick=function(){if(extras.confirmationDialog.enable&&confirmationDialog){if(!extras.confirmationDialog.$parentElement){sections.popups.$element.removeClass('hidden');}
confirmationDialog.show($e.position().top);}
else{clicked();}};buttons[id]={isTruncated:false,text:text,isVisible:false};var isAnchorTag=(options.href!==undefined);var $e=buttons[id].$element=JoubelUI.createButton($.extend({'class':'h5p-question-'+id,html:text,title:text,on:{click:function(event){handleButtonClick();if(isAnchorTag){event.preventDefault();}}}},options));buttonOrder.push(id);if(isAnchorTag){$e.on('keypress',function(event){if(event.which===32){handleButtonClick();event.preventDefault();}});}
if(visible===undefined||visible){$e.appendTo(sections.buttons.$element);buttons[id].isVisible=true;showSection(sections.buttons);}
return self;};var setButtonWidth=function(button){var $button=button.$element;var $tmp=$button.clone().css({'position':'absolute','white-space':'nowrap','max-width':'none'}).removeClass('truncated').html(button.text).appendTo($button.parent());button.width={max:Math.ceil($tmp.outerWidth()+parseFloat($tmp.css('margin-left'))+parseFloat($tmp.css('margin-right')))};$tmp.html('').addClass('truncated');button.width.min=Math.ceil($tmp.outerWidth()+parseFloat($tmp.css('margin-left'))+parseFloat($tmp.css('margin-right')));$tmp.remove();};self.addConfirmationDialogToButton=function(options,clicked){options=options||{};if(!options.enable){return;}
var confirmationDialog=new H5P.ConfirmationDialog({instance:options.instance,headerText:options.l10n.header,dialogText:options.l10n.body,cancelText:options.l10n.cancelLabel,confirmText:options.l10n.confirmLabel});if(options.$parentElement){confirmationDialog.appendTo(options.$parentElement.get(0));}
else{if(sections.popups===undefined){register('popups');if(initialized){insert(self.order,'popups',sections,$wrapper);}
sections.popups.$element.addClass('hidden');self.order.push('popups');}
confirmationDialog.appendTo(sections.popups.$element.get(0));}
confirmationDialog.on('confirmed',function(){if(!options.$parentElement){sections.popups.$element.addClass('hidden');}
clicked();self.trigger('confirmed');});confirmationDialog.on('canceled',function(){if(!options.$parentElement){sections.popups.$element.addClass('hidden');}
self.trigger('canceled');});return confirmationDialog;};self.showButton=function(id,priority){var aboutToBeHidden=existsInArray(id,'id',buttonsToHide)!==-1;if(buttons[id]===undefined||(buttons[id].isVisible===true&&!aboutToBeHidden)){return self;}
priority=priority||0;var indexToShow=existsInArray(id,'id',buttonsToShow);if(indexToShow!==-1){if(buttonsToShow[indexToShow].priority<priority){buttonsToShow[indexToShow].priority=priority;}
return self;}
var exists=existsInArray(id,'id',buttonsToHide);if(exists!==-1){if(buttonsToHide[exists].priority<=priority){buttonsToHide.splice(exists,1);buttonsToShow.push({id:id,priority:priority});}}
else if(!buttons[id].$element.is(':visible')){buttonsToShow.push({id:id,priority:priority});}
if(!toggleButtonsTimer){toggleButtonsTimer=setTimeout(toggleButtons,0);}
return self;};self.hideButton=function(id,priority){var aboutToBeShown=existsInArray(id,'id',buttonsToShow)!==-1;if(buttons[id]===undefined||(buttons[id].isVisible===false&&!aboutToBeShown)){return self;}
priority=priority||0;var indexToHide=existsInArray(id,'id',buttonsToHide);if(indexToHide!==-1){if(buttonsToHide[indexToHide].priority<priority){buttonsToHide[indexToHide].priority=priority;}
return self;}
var exists=existsInArray(id,'id',buttonsToShow);if(exists!==-1){if(buttonsToShow[exists].priority<=priority){buttonsToShow.splice(exists,1);buttonsToHide.push({id:id,priority:priority});}}
else if(!buttons[id].$element.is(':visible')){hideButton(id);}
else{buttonsToHide.push({id:id,priority:priority});}
if(!toggleButtonsTimer){toggleButtonsTimer=setTimeout(toggleButtons,0);}
return self;};self.focusButton=function(id){if(id===undefined){for(var i=0;i<buttonOrder.length;i++){var button=buttons[buttonOrder[i]];if(button&&button.isVisible){button.$element.focus();break;}}}
else if(buttons[id]&&buttons[id].$element.is(':visible')){buttons[id].$element.focus();}
return self;};self.toggleReadSpeaker=function(disable){behaviour.disableReadSpeaker=disable||!behaviour.disableReadSpeaker;};self.insertSectionAtElement=function(id,$element){if(sections[id]===undefined){register(id);}
sections[id].parent=$element;if(!initialized){insert([id],id,sections,$element);}
return self;};self.attach=function($container){if(self.isRoot()){self.setActivityStarted();}
if($wrapper===undefined){if(self.registerDomElements!==undefined&&(self.registerDomElements instanceof Function||typeof self.registerDomElements==='function')){self.registerDomElements();}
$read=$('<div/>',{'aria-live':'polite','class':'h5p-hidden-read'});register('read',$read);self.trigger('registerDomElements');}
$wrapper=$container;$container.html('').addClass('h5p-question h5p-'+type);var $sections=[];for(var i=0;i<self.order.length;i++){var section=self.order[i];if(sections[section]){if(sections[section].parent){sections[section].$element.appendTo(sections[section].parent);}
else{$sections.push(sections[section].$element);}
sections[section].isVisible=true;}}
$container.append($sections);self.trigger('domChanged',{'$target':$container,'library':self.libraryInfo.machineName,'contentId':self.contentId,'key':'newLibrary'},{'bubbles':true,'external':true});initialized=true;return self;};self.detachSections=function(){initialized=false;for(var section in sections){sections[section].$element.detach();}
return self;};self.on('resize',function(){if(!sectionsIsTransitioning&&sections.feedback&&showFeedback){setElementHeight(sections.feedback.$element);}
var $element=sections.feedback;var $click=clickElement;if($element!=null&&$element.$element!=null&&$click!=null&&$click.$element!=null){setTimeout(function(){positionFeedbackPopup($element.$element,$click.$element);},10);}
resizeButtons();});}
Question.prototype=Object.create(EventDispatcher.prototype);Question.prototype.constructor=Question;Question.determineOverallFeedback=function(feedbacks,scoreRatio){scoreRatio=Math.floor(scoreRatio*100);for(var i=0;i<feedbacks.length;i++){var feedback=feedbacks[i];var hasFeedback=(feedback.feedback!==undefined&&feedback.feedback.trim().length!==0);if(feedback.from<=scoreRatio&&feedback.to>=scoreRatio&&hasFeedback){return feedback.feedback;}}
return'';};return Question;})(H5P.jQuery,H5P.EventDispatcher,H5P.JoubelUI);;H5P.Question.Explainer=(function($){function Explainer(title,explanations){var self=this;var createHTML=function(){self.$explanation=$('<div>',{'class':'h5p-question-explanation-container'});$('<div>',{'class':'h5p-question-explanation-title',role:'heading',html:title,appendTo:self.$explanation});var $explanationList=$('<ul>',{'class':'h5p-question-explanation-list',appendTo:self.$explanation});for(var i=0;i<explanations.length;i++){var feedback=explanations[i];var $explanationItem=$('<li>',{'class':'h5p-question-explanation-item',appendTo:$explanationList});var $content=$('<div>',{'class':'h5p-question-explanation-status'});if(feedback.correct){$('<span>',{'class':'h5p-question-explanation-correct',html:feedback.correct,appendTo:$content});}
if(feedback.wrong){$('<span>',{'class':'h5p-question-explanation-wrong',html:feedback.wrong,appendTo:$content});}
$content.appendTo($explanationItem);if(feedback.text){$('<div>',{'class':'h5p-question-explanation-text',html:feedback.text,appendTo:$explanationItem});}}};createHTML();self.getElement=function(){return self.$explanation;};}
return Explainer;})(H5P.jQuery);;(function(Question){Question.ScorePoints=function(){var self=this;var elements=[];var showElementsTimer;self.getElement=function(isCorrect){var element=document.createElement('div');element.classList.add(isCorrect?'h5p-question-plus-one':'h5p-question-minus-one');element.classList.add('h5p-question-hidden-one');elements.push(element);if(showElementsTimer){clearTimeout(showElementsTimer);}
showElementsTimer=setTimeout(showElements,0);return element;};var showElements=function(){var delay=0;var increment=150;var maxTime=1000;if(elements.length&&elements.length>Math.ceil(maxTime/increment)){increment=maxTime/elements.length;}
for(var i=0;i<elements.length;i++){setTimeout(showElement(elements[i]),delay);delay+=increment;}};var showElement=function(element){return function(){element.classList.remove('h5p-question-hidden-one');};};};})(H5P.Question);;H5PEditor.RadioGroup=H5PEditor.widgets.radioGroup=(function($){var groupCounter=0;function RadioGroup(parent,field,params,setValue){this.parent=parent;this.field=field;this.value=params;this.setValue=setValue;this.alignment=this.field.alignment||'vertical';this.changes=[];this.triggerListeners=function(){for(var i=0;i<this.changes.length;i++){this.changes[i](this.value);}};groupCounter++;}
RadioGroup.prototype.appendTo=function($wrapper){var self=this;var buttons=[];var toggleSelected=function($selectedInput){buttons.forEach(function($button){$button.removeClass('checked');});$selectedInput.parent().addClass('checked');};self.$container=$(H5PEditor.createFieldMarkup(self.field,'<div class="h5p-editor-radio-group-container '+self.alignment+'" role="radiogroup"></div>'));var $buttonGroup=self.$container.find('.h5p-editor-radio-group-container');for(var i=0;i<self.field.options.length;i++){var option=self.field.options[i];var inputId='h5p-editor-radio-group-button-'+groupCounter+'-'+i;var isChecked=(self.value===option.value)||(self.value===undefined&&this.field.default===option.value);var $button=$('<div>',{'class':'h5p-editor-radio-group-button '+option.value+(isChecked?' checked':'')}).appendTo($buttonGroup);buttons.push($button);$('<input>',{type:'radio',name:self.field.name+groupCounter,value:option.value,role:'radio',id:inputId,checked:isChecked,change:function(){toggleSelected($(this));self.value=$('input:checked',$buttonGroup).val();self.setValue(self.field,self.value);self.triggerListeners();}}).appendTo($button);$('<label>',{'for':inputId}).append($('<span>',{html:option.label})).appendTo($button);if(option.description){$('<div>',{'class':'h5p-option-description',html:option.description}).appendTo($button);}}
self.$container.appendTo($wrapper);};RadioGroup.prototype.validate=function(){return true;};RadioGroup.prototype.remove=function(){};return RadioGroup;})(H5P.jQuery);;H5PEditor.ShowWhen=(function($){function SelectHandler(field,equals){this.satisfied=function(){return(equals.indexOf(field.value)!==-1);};}
function LibraryHandler(field,equals){this.satisfied=function(){var value;if(field.currentLibrary!==undefined){value=field.currentLibrary.split(' ')[0];}
return(equals.indexOf(value)!==-1);};}
function BooleanHandler(field,equals){this.satisfied=function(){return field.value===equals;};}
function createFieldHandler(field,equals){if(field.field.type==='library'){return new LibraryHandler(field,equals);}
else if(field.field.type==='select'){return new SelectHandler(field,equals);}
else if(field.field.type==='boolean'){return new BooleanHandler(field,equals);}}
function RuleHandler(type){var TYPE_AND='and';var TYPE_OR='or';var handlers=[];type=type||TYPE_OR;this.add=function(handler){handlers.push(handler);};this.rulesSatisfied=function(){for(var i=0;i<handlers.length;i++){var ruleHit=handlers[i].satisfied();if(ruleHit&&type===TYPE_OR){return true;}
else if(type===TYPE_AND&&!ruleHit){return false;}}
return false;};}
function ShowWhen(parent,field,params,setValue){var self=this;self.field=field;self.passReadies=true;self.value=params;var $wrapper=$('<div>',{'class':'field h5p-editor-widget-show-when'});var showing=false;var config=self.field.showWhen;if(config===undefined){throw new Error('You need to set the showWhen property in semantics.json when using the showWhen widget');}
var ruleHandler=new RuleHandler(config.type);for(var i=0;i<config.rules.length;i++){var rule=config.rules[i];var targetField=H5PEditor.findField(rule.field,parent);var handler=createFieldHandler(targetField,rule.equals);if(handler!==undefined){ruleHandler.add(handler);H5PEditor.followField(parent,rule.field,config.detach?function(){if(showing!=ruleHandler.rulesSatisfied()){showing=!showing;if(showing){$wrapper.appendTo(self.$container);}
else{$wrapper.detach();}}}:function(){showing=ruleHandler.rulesSatisfied();$wrapper.toggleClass('hidden',!showing);});}}
var widgetName=config.widget||field.type;var fieldInstance=new H5PEditor.widgets[widgetName](parent,field,params,setValue);fieldInstance.appendTo($wrapper);self.appendTo=function($container){if(!config.detach){$wrapper.appendTo($container);}
self.$container=$container;};self.validate=function(){return showing?fieldInstance.validate():true;};self.remove=function(){};}
return ShowWhen;})(H5PEditor.$);H5PEditor.widgets.showWhen=H5PEditor.ShowWhen;;H5P.TrueFalse=(function($,Question){'use strict';var MAX_SCORE=1;var State=Object.freeze({ONGOING:1,FINISHED_WRONG:2,FINISHED_CORRECT:3,INTERNAL_SOLUTION:4,EXTERNAL_SOLUTION:5});var Button=Object.freeze({CHECK:'check-answer',TRYAGAIN:'try-again',SHOW_SOLUTION:'show-solution'});function TrueFalse(options,id,contentData){var self=this;Question.call(self,'true-false');var params=$.extend(true,{question:'No question text provided',correct:'true',l10n:{trueText:'True',falseText:'False',score:'You got @score of @total points',checkAnswer:'Check',showSolutionButton:'Show solution',tryAgain:'Retry',wrongAnswerMessage:'Wrong answer',correctAnswerMessage:'Correct answer',scoreBarLabel:'You got :num out of :total points',a11yCheck:'Check the answers. The responses will be marked as correct, incorrect, or unanswered.',a11yShowSolution:'Show the solution. The task will be marked with its correct solution.',a11yRetry:'Retry the task. Reset all responses and start the task over again.',},behaviour:{enableRetry:true,enableSolutionsButton:true,enableCheckButton:true,confirmCheckDialog:false,confirmRetryDialog:false,autoCheck:false}},options);TrueFalse.counter=(TrueFalse.counter===undefined?0:TrueFalse.counter+1);var domId='h5p-tfq'+H5P.TrueFalse.counter;this.contentId=id;this.contentData=contentData;var answerGroup=new H5P.TrueFalse.AnswerGroup(domId,params.correct,params.l10n);if(contentData.previousState!==undefined&&contentData.previousState.answer!==undefined){answerGroup.check(contentData.previousState.answer);}
answerGroup.on('selected',function(){self.triggerXAPI('interacted');if(params.behaviour.autoCheck){checkAnswer();triggerXAPIAnswered();}});var createAnswers=function(){return answerGroup.getDomElement();};var registerButtons=function(){var $content=$('[data-content-id="'+self.contentId+'"].h5p-content');var $containerParents=$content.parents('.h5p-container');var $container;if($containerParents.length!==0){$container=$containerParents.last();}
else if($content.length!==0){$container=$content;}
else{$container=$(document.body);}
if(params.behaviour.enableSolutionsButton===true){self.addButton(Button.SHOW_SOLUTION,params.l10n.showSolutionButton,function(){self.showSolutions(true);},false,{'aria-label':params.l10n.a11yShowSolution,});}
if(!params.behaviour.autoCheck&&params.behaviour.enableCheckButton){self.addButton(Button.CHECK,params.l10n.checkAnswer,function(){checkAnswer();triggerXAPIAnswered();},true,{'aria-label':params.l10n.a11yCheck},{confirmationDialog:{enable:params.behaviour.confirmCheckDialog,l10n:params.confirmCheck,instance:self,$parentElement:$container}});}
if(params.behaviour.enableRetry===true){self.addButton(Button.TRYAGAIN,params.l10n.tryAgain,function(){self.resetTask();},true,{'aria-label':params.l10n.a11yRetry,},{confirmationDialog:{enable:params.behaviour.confirmRetryDialog,l10n:params.confirmRetry,instance:self,$parentElement:$container}});}
toggleButtonState(State.ONGOING);};var triggerXAPIAnswered=function(){var xAPIEvent=self.createXAPIEventTemplate('answered');addQuestionToXAPI(xAPIEvent);addResponseToXAPI(xAPIEvent);self.trigger(xAPIEvent);};var addQuestionToXAPI=function(xAPIEvent){var definition=xAPIEvent.getVerifiedStatementValue(['object','definition']);definition.description={'en-US':$('<div>'+params.question+'</div>').text()};definition.type='http://adlnet.gov/expapi/activities/cmi.interaction';definition.interactionType='true-false';definition.correctResponsesPattern=[getCorrectAnswer()];};var getCorrectAnswer=function(){return(params.correct==='true'?'true':'false');};var getWrongAnswer=function(){return(params.correct==='false'?'true':'false');};var addResponseToXAPI=function(xAPIEvent){var isCorrect=answerGroup.isCorrect();xAPIEvent.setScoredResult(isCorrect?MAX_SCORE:0,MAX_SCORE,self,true,isCorrect);xAPIEvent.data.statement.result.response=(isCorrect?getCorrectAnswer():getWrongAnswer());};var toggleButtonVisibility=function(buttonId,visible){if(visible===true){self.showButton(buttonId);}
else{self.hideButton(buttonId);}};var toggleButtonState=function(state){toggleButtonVisibility(Button.SHOW_SOLUTION,state===State.FINISHED_WRONG);toggleButtonVisibility(Button.CHECK,state===State.ONGOING);toggleButtonVisibility(Button.TRYAGAIN,state===State.FINISHED_WRONG||state===State.INTERNAL_SOLUTION);};var checkAnswer=function(){var score=self.getScore();var scoreText;toggleButtonState(score===MAX_SCORE?State.FINISHED_CORRECT:State.FINISHED_WRONG);if(score===MAX_SCORE&&params.behaviour.feedbackOnCorrect){scoreText=params.behaviour.feedbackOnCorrect;}
else if(score===0&&params.behaviour.feedbackOnWrong){scoreText=params.behaviour.feedbackOnWrong;}
else{scoreText=params.l10n.score;}
scoreText=scoreText.replace('@score',score).replace('@total',MAX_SCORE);self.setFeedback(scoreText,score,MAX_SCORE,params.l10n.scoreBarLabel);answerGroup.reveal();};self.registerDomElements=function(){var self=this;var media=params.media;if(media&&media.type&&media.type.library){media=media.type;var type=media.library.split(' ')[0];if(type==='H5P.Image'){if(media.params.file){self.setImage(media.params.file.path,{disableImageZooming:params.media.disableImageZooming||false,alt:media.params.alt});}}
else if(type==='H5P.Video'){if(media.params.sources){self.setVideo(media);}}}
self.setIntroduction('<div id="'+domId+'">'+params.question+'</div>');self.$content=createAnswers();self.setContent(self.$content);registerButtons();};self.getCurrentState=function(){return{answer:answerGroup.getAnswer()};};self.getAnswerGiven=function(){return answerGroup.hasAnswered();};self.getScore=function(){return answerGroup.isCorrect()?MAX_SCORE:0;};self.getMaxScore=function(){return MAX_SCORE;};self.getTitle=function(){return H5P.createTitle((self.contentData&&self.contentData.metadata&&self.contentData.metadata.title)?self.contentData.metadata.title:'True-False');};self.showSolutions=function(internal){checkAnswer();answerGroup.showSolution();toggleButtonState(internal?State.INTERNAL_SOLUTION:State.EXTERNAL_SOLUTION);};self.resetTask=function(){answerGroup.reset();self.removeFeedback();toggleButtonState(State.ONGOING);};self.getXAPIData=function(){var xAPIEvent=this.createXAPIEventTemplate('answered');this.addQuestionToXAPI(xAPIEvent);this.addResponseToXAPI(xAPIEvent);return{statement:xAPIEvent.data.statement};};self.addQuestionToXAPI=function(xAPIEvent){var definition=xAPIEvent.getVerifiedStatementValue(['object','definition']);$.extend(definition,this.getxAPIDefinition());};self.getxAPIDefinition=function(){var definition={};definition.interactionType='true-false';definition.type='http://adlnet.gov/expapi/activities/cmi.interaction';definition.description={'en-US':$('<div>'+params.question+'</div>').text()};definition.correctResponsesPattern=[getCorrectAnswer()];return definition;};self.addResponseToXAPI=function(xAPIEvent){var isCorrect=answerGroup.isCorrect();var rawUserScore=isCorrect?MAX_SCORE:0;var currentResponse='';xAPIEvent.setScoredResult(rawUserScore,MAX_SCORE,self,true,isCorrect);if(self.getCurrentState().answer!==undefined){currentResponse+=answerGroup.isCorrect()?getCorrectAnswer():getWrongAnswer();}
xAPIEvent.data.statement.result.response=currentResponse;};}
TrueFalse.prototype=Object.create(Question.prototype);TrueFalse.prototype.constructor=TrueFalse;return TrueFalse;})(H5P.jQuery,H5P.Question);;H5P.TrueFalse.AnswerGroup=(function($,EventDispatcher){'use strict';function AnswerGroup(domId,correctOption,l10n){var self=this;EventDispatcher.call(self);var $answers=$('<div>',{'class':'h5p-true-false-answers',role:'radiogroup','aria-labelledby':domId});var answer;var trueAnswer=new H5P.TrueFalse.Answer(l10n.trueText,l10n.correctAnswerMessage,l10n.wrongAnswerMessage);var falseAnswer=new H5P.TrueFalse.Answer(l10n.falseText,l10n.correctAnswerMessage,l10n.wrongAnswerMessage);var correctAnswer=(correctOption==='true'?trueAnswer:falseAnswer);var wrongAnswer=(correctOption==='false'?trueAnswer:falseAnswer);var handleChecked=function(newAnswer,other){return function(){answer=newAnswer;other.uncheck();self.trigger('selected');};};trueAnswer.on('checked',handleChecked(true,falseAnswer));falseAnswer.on('checked',handleChecked(false,trueAnswer));var handleInvert=function(newAnswer,other){return function(){answer=newAnswer;other.check();self.trigger('selected');};};trueAnswer.on('invert',handleInvert(false,falseAnswer));falseAnswer.on('invert',handleInvert(true,trueAnswer));var handleTabable=function(other,tabable){return function(){if(!tabable||!self.hasAnswered()||other.isChecked()){other.tabable(tabable);}};};trueAnswer.on('focus',handleTabable(falseAnswer,false));falseAnswer.on('focus',handleTabable(trueAnswer,false));trueAnswer.on('blur',handleTabable(falseAnswer,true));falseAnswer.on('blur',handleTabable(trueAnswer,true));$answers.append(trueAnswer.getDomElement());$answers.append(falseAnswer.getDomElement());self.getDomElement=function(){return $answers;};self.check=function(answer){if(answer){trueAnswer.check();}
else{falseAnswer.check();}};self.getAnswer=function(){return answer;};self.hasAnswered=function(){return answer!==undefined;};self.isCorrect=function(){return correctAnswer.isChecked();};self.enable=function(){trueAnswer.enable().tabable(true);falseAnswer.enable();};self.disable=function(){trueAnswer.disable();falseAnswer.disable();};self.reveal=function(){if(self.hasAnswered()){if(self.isCorrect()){correctAnswer.markCorrect();}
else{wrongAnswer.markWrong();}}
self.disable();};self.reset=function(){trueAnswer.reset();falseAnswer.reset();self.enable();answer=undefined;};self.showSolution=function(){correctAnswer.markCorrect();wrongAnswer.unmark();};}
AnswerGroup.prototype=Object.create(EventDispatcher.prototype);AnswerGroup.prototype.constructor=AnswerGroup;return AnswerGroup;})(H5P.jQuery,H5P.EventDispatcher);;H5P.TrueFalse.Answer=(function($,EventDispatcher){'use strict';var Keys={ENTER:13,SPACE:32,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40};function Answer(text,correctMessage,wrongMessage){var self=this;EventDispatcher.call(self);var checked=false;var enabled=true;var $answer=$('<div>',{'class':'h5p-true-false-answer',role:'radio','aria-checked':false,html:text+'<span class="aria-label"></span>',tabindex:0,click:function(event){if(event.which===1){self.check();}},keydown:function(event){if(!enabled){return;}
if([Keys.SPACE,Keys.ENTER].indexOf(event.keyCode)!==-1){self.check();}
else if([Keys.LEFT_ARROW,Keys.UP_ARROW,Keys.RIGHT_ARROW,Keys.DOWN_ARROW].indexOf(event.keyCode)!==-1){self.uncheck();self.trigger('invert');}},focus:function(){self.trigger('focus');},blur:function(){self.trigger('blur');}});var $ariaLabel=$answer.find('.aria-label');var chromeBugFixer=function(callback){setTimeout(function(){callback();},0);};self.getDomElement=function(){return $answer;};self.uncheck=function(){if(enabled){$answer.blur();checked=false;chromeBugFixer(function(){$answer.attr('aria-checked',checked);});}
return self;};self.tabable=function(enabled){$answer.attr('tabIndex',enabled?0:null);return self;};self.check=function(){if(enabled){checked=true;chromeBugFixer(function(){$answer.attr('aria-checked',checked);});self.trigger('checked');$answer.focus();}
return self;};self.isChecked=function(){return checked;};self.enable=function(){$answer.attr({'aria-disabled':'',tabIndex:0});enabled=true;return self;};self.disable=function(){$answer.attr({'aria-disabled':true,tabIndex:null});enabled=false;return self;};self.reset=function(){self.enable();self.uncheck();self.unmark();$ariaLabel.html('');return self;};self.markWrong=function(){chromeBugFixer(function(){$answer.addClass('wrong');});$ariaLabel.html('.'+wrongMessage);return self;};self.markCorrect=function(){chromeBugFixer(function(){$answer.addClass('correct');});$ariaLabel.html('.'+correctMessage);return self;};self.unmark=function(){chromeBugFixer(function(){$answer.removeClass('wrong correct');});return self;};}
Answer.prototype=Object.create(EventDispatcher.prototype);Answer.prototype.constructor=Answer;return Answer;})(H5P.jQuery,H5P.EventDispatcher);;var H5PPresave=H5PPresave||{};H5PPresave['H5P.TrueFalse']=function(content,finished){var presave=H5PEditor.Presave;if(isContentInvalid()){throw new presave.exceptions.InvalidContentSemanticsException('Invalid True/False Error');}
finished({maxScore:1});function isContentInvalid(){return!presave.checkNestedRequirements(content,'content.question')||content.question.trim()==='';}};;